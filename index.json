[{"content":"Intro We\u0026rsquo;ll be using yml/yaml format for all examples down below, I recommend using yml over toml as it is easier to read. You can find any YML to TOML converters if necessary. Guide Follow Quick Start guide to setup hugo and create a new site.\nNote: Use -f to select yml format\nhugo new site \u0026lt;name of site\u0026gt; -f yml\nMake sure you install latest version of hugo(\u0026gt;=0.83.0).\nAfter you have created a new site, at Step 3 follow the steps:\nMethod 1 Inside the folder of your Hugo site, run:\ngit clone https://github.com/adityatelange/hugo-PaperMod themes/PaperMod --depth=1 Note: You may use --branch v5.0 to end of above command if you want to stick to specific release.\nUpdating theme :\ncd themes/PaperMod git pull Method 2 you can use as submodule with\ngit submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod --depth=1 git submodule update --init --recursive # needed when you reclone your repo (submodules may not get cloned automatically) Note: You may use --branch v5.0 to end of above command if you want to stick to specific release.\nUpdating theme :\ngit submodule update --remote --merge Method 3 Or you can Download as Zip from Github Page and extract in your themes directory\nDirect Links:\nMaster Branch (Latest) v5.0 v4.0 v3.0 v2.0 v1.0 Finally \u0026hellip; Add in config.yml:\ntheme: \u0026quot;PaperMod\u0026quot; Quick Links Papermod - Features Papermod - FAQs Papermod - Variables Papermod - Icons ChangeLog Sample config.yml Example Site Structure is present here: exampleSite\nUse appropriately\nbaseURL: \u0026quot;https://examplesite.com/\u0026quot; title: ExampleSite paginate: 5 theme: PaperMod enableRobotsTXT: true buildDrafts: false buildFuture: false buildExpired: false googleAnalytics: UA-123-45 minify: disableXML: true minifyOutput: true params: env: production # to enable google analytics, opengraph, twitter-cards and schema. title: ExampleSite description: \u0026quot;ExampleSite description\u0026quot; keywords: [Blog, Portfolio, PaperMod] author: Me # author: [\u0026quot;Me\u0026quot;, \u0026quot;You\u0026quot;] # multiple authors images: [\u0026quot;\u0026lt;link or path of image for opengraph, twitter-cards\u0026gt;\u0026quot;] DateFormat: \u0026quot;January 2, 2006\u0026quot; defaultTheme: auto # dark, light disableThemeToggle: false ShowReadingTime: true ShowShareButtons: true ShowPostNavLinks: true ShowBreadCrumbs: true ShowCodeCopyButtons: false disableSpecial1stPost: false disableScrollToTop: false comments: false hidemeta: false hideSummary: false showtoc: false tocopen: false assets: # disableHLJS: true # to disable highlight.js # disableFingerprinting: true favicon: \u0026quot;\u0026lt;link / abs url\u0026gt;\u0026quot; favicon16x16: \u0026quot;\u0026lt;link / abs url\u0026gt;\u0026quot; favicon32x32: \u0026quot;\u0026lt;link / abs url\u0026gt;\u0026quot; apple_touch_icon: \u0026quot;\u0026lt;link / abs url\u0026gt;\u0026quot; safari_pinned_tab: \u0026quot;\u0026lt;link / abs url\u0026gt;\u0026quot; label: text: \u0026quot;Home\u0026quot; icon: /apple-touch-icon.png iconHeight: 35 # profile-mode profileMode: enabled: false # needs to be explicitly set title: ExampleSite subtitle: \u0026quot;This is subtitle\u0026quot; imageUrl: \u0026quot;\u0026lt;img location\u0026gt;\u0026quot; imageWidth: 120 imageHeight: 120 imageTitle: my image buttons: - name: Posts url: posts - name: Tags url: tags # home-info mode homeInfoParams: Title: \u0026quot;Hi there \\U0001F44B\u0026quot; Content: Welcome to my blog socialIcons: - name: twitter url: \u0026quot;https://twitter.com/\u0026quot; - name: stackoverflow url: \u0026quot;https://stackoverflow.com\u0026quot; - name: github url: \u0026quot;https://github.com/\u0026quot; analytics: google: SiteVerificationTag: \u0026quot;XYZabc\u0026quot; bing: SiteVerificationTag: \u0026quot;XYZabc\u0026quot; yandex: SiteVerificationTag: \u0026quot;XYZabc\u0026quot; cover: hidden: true # hide everywhere but not in structured data hiddenInList: true # hide on list pages and home hiddenInSingle: true # hide on single page editPost: URL: \u0026quot;https://github.com/\u0026lt;path_to_repo\u0026gt;/content\u0026quot; Text: \u0026quot;Suggest Changes\u0026quot; # edit text appendFilePath: true # to append file path to Edit link # for search # https://fusejs.io/api/options.html fuseOpts: isCaseSensitive: false shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 keys: [\u0026quot;title\u0026quot;, \u0026quot;permalink\u0026quot;, \u0026quot;summary\u0026quot;, \u0026quot;content\u0026quot;] menu: main: - identifier: categories name: categories url: /categories/ weight: 10 - identifier: tags name: tags url: /tags/ weight: 20 - identifier: example name: example.org url: https://example.org weight: 30 # Read: https://github.com/adityatelange/hugo-PaperMod/wiki/FAQs#using-hugos-syntax-highlighter-chroma # pygmentsUseClasses: true # markup: # highlight: # # anchorLineNos: true # codeFences: true # guessSyntax: true # lineNos: true # style: monokai Sample Page.md --- title: \u0026quot;My 1st post\u0026quot; date: 2020-09-15T11:30:03+00:00 # weight: 1 # aliases: [\u0026quot;/first\u0026quot;] tags: [\u0026quot;first\u0026quot;] author: \u0026quot;Me\u0026quot; # author: [\u0026quot;Me\u0026quot;, \u0026quot;You\u0026quot;] # multiple authors showToc: true TocOpen: false draft: false hidemeta: false comments: false description: \u0026quot;Desc Text.\u0026quot; canonicalURL: \u0026quot;https://canonical.url/to/page\u0026quot; disableHLJS: true # to disable highlightjs disableShare: false disableHLJS: false hideSummary: false searchHidden: true ShowReadingTime: true ShowBreadCrumbs: true ShowPostNavLinks: true cover: image: \u0026quot;\u0026lt;image path/url\u0026gt;\u0026quot; # image path/url alt: \u0026quot;\u0026lt;alt text\u0026gt;\u0026quot; # alt text caption: \u0026quot;\u0026lt;text\u0026gt;\u0026quot; # display caption under cover relative: false # when using page bundles set this to true hidden: true # only hide on current single page editPost: URL: \u0026quot;https://github.com/\u0026lt;path_to_repo\u0026gt;/content\u0026quot; Text: \u0026quot;Suggest Changes\u0026quot; # edit text appendFilePath: true # to append file path to Edit link --- You can use it by creating archetypes/post.md\nhugo new --kind post \u0026lt;name\u0026gt; ","permalink":"https://st-saint.github.io/posts/papermod/papermod-installation/","summary":"Read Install and Update instructions here","title":"Installation | Update"},{"content":"Intro We\u0026rsquo;ll be using yml/yaml format for all examples down below, I recommend using yml over toml as it is easier to read.\nYou can find any YML to TOML converters if necessary.\nAssets (js/css) The following is enabled by default\nminification - makes the assets size smallest as possible. bundling - bundles all the styles in one single asset fingerprint/integrity check. Default Theme light/dark/auto params: # defaultTheme: light # defaultTheme: dark defaultTheme: auto # to switch between dark or light according to browser theme Theme Switch Toggle (enabled by default) Shows icon besides title of page to change theme\nTo disable it :\ndisableThemeToggle: true You can refer following table for better understanding\u0026hellip;\ndefaultTheme disableThemeToggle checks local storage? checks system theme? Info auto true No Yes only system theme false Yes (if not-\u0026gt;2) Yes (2) switch present dark true No No force dark only false Yes No switch present light true No No force light only false Yes No switch present Archives Layout Create a page with archive.md in content directory with following content\n. ├── config.yml ├── content/ │ ├── archives.md \u0026lt;--- Create archive.md here │ └── posts/ ├── static/ └── themes/ └── PaperMod/ and add the following to it\n--- title: \u0026quot;Archive\u0026quot; layout: \u0026quot;archives\u0026quot; url: \u0026quot;/archives/\u0026quot; summary: archives --- Note: Archives Layout does not support Multilingual Month Translations.\nex: archives.md\nRegular Mode (default-mode) Home-Info Mode Use 1st entry as some Information\nadd following to config file\nparams: homeInfoParams: Title: Hi there wave Content: Can be Info, links, about... socialIcons: # optional - name: \u0026quot;\u0026lt;platform\u0026gt;\u0026quot; url: \u0026quot;\u0026lt;link\u0026gt;\u0026quot; - name: \u0026quot;\u0026lt;platform 2\u0026gt;\u0026quot; url: \u0026quot;\u0026lt;link2\u0026gt;\u0026quot; ex. config.yml#L106\nProfile Mode Shows Index/Home page as Full Page with Social Links and Image\nadd following to config file\nparams: profileMode: enabled: true title: \u0026quot;\u0026lt;Title\u0026gt;\u0026quot; # optional default will be site title subtitle: \u0026quot;This is subtitle\u0026quot; imageUrl: \u0026quot;\u0026lt;image link\u0026gt;\u0026quot; # optional imageTitle: \u0026quot;\u0026lt;title of image as alt\u0026gt;\u0026quot; # optional imageWidth: 120 # custom size imageHeight: 120 # custom size buttons: - name: Archive url: \u0026quot;/archive\u0026quot; - name: Github url: \u0026quot;https://github.com/\u0026quot; socialIcons: # optional - name: \u0026quot;\u0026lt;platform\u0026gt;\u0026quot; url: \u0026quot;\u0026lt;link\u0026gt;\u0026quot; - name: \u0026quot;\u0026lt;platform 2\u0026gt;\u0026quot; url: \u0026quot;\u0026lt;link2\u0026gt;\u0026quot; Search Page PaperMod uses Fuse.js Basic for seach functionality\nAdd the following to site config, config.yml\noutputs: home: - HTML - RSS - JSON # is necessary Create a page with search.md in content directory with following content\n--- title: \u0026quot;Search\u0026quot; # in any language you want layout: \u0026quot;search\u0026quot; # is necessary # url: \u0026quot;/archive\u0026quot; # description: \u0026quot;Description for Search\u0026quot; summary: \u0026quot;search\u0026quot; --- To hide a particular page from being searched, add it in post\u0026rsquo;s fron\u0026rsquo;t matter\n--- searchHidden: true ex: search.md\nSearch Page also has Key bindings:\nArrow keys to move up/down the list Enter key (return) or Right Arrow key to Go to highlighted page Escape key to clear searchbox and results For Multilingual use search.\u0026lt;lang\u0026gt;.md ex. search.es.md.\nNote: Search will work only on current language, user is currently on !\nCustomizing Fusejs Options\nRefer https://fusejs.io/api/options.html for Options, Add those as shown below.\nparams: fuseOpts: isCaseSensitive: false shouldSort: true location: 0 distance: 1000 threshold: 0.4 minMatchCharLength: 0 keys: [\u0026quot;title\u0026quot;, \u0026quot;permalink\u0026quot;, \u0026quot;summary\u0026quot;, \u0026quot;content\u0026quot;] Draft Page indication adds [draft] mark to indicate draft pages.\nPost Cover Image In post\u0026rsquo;s page-variables add :\ncover: image: \u0026quot;\u0026lt;image path/url\u0026gt;\u0026quot; # can also paste direct link from external site # ex. https://i.ibb.co/K0HVPBd/paper-mod-profilemode.png alt: \u0026quot;\u0026lt;alt text\u0026gt;\u0026quot; caption: \u0026quot;\u0026lt;text\u0026gt;\u0026quot; relative: false # To use relative path for cover image, used in hugo Page-bundles When you include images in the Page Bundle, multiple sizes of the image will automatically be provided using the HTML5 srcset field.\nTo reduce generation time and size of the site, you can disable this feature using\nparams: cover: responsiveImages: false To enable hyperlinks to the full image size on post pages, use\nparams: cover: linkFullImages: true Share Buttons on post Displays Share Buttons at Bottom of each post\nto show share buttons add\nparams: ShowShareButtons: true Show post reading time Displays Reading Time (the estimated time, in minutes, it takes to read the content.)\nTo show reading time add\nParams: ShowReadingTime: true Show Table of Contents (Toc) on blog post Displays ToC on blog-pages\nTo show ToC add following to page-variables\nShowToc: true To keep Toc Open by default on a post add following to page-variables:\nTocOpen: true BreadCrumb Navigation Adds BreadCrumb Navigation above Post\u0026rsquo;s Title to show subsections and Navigation to Home\nparams: ShowBreadCrumbs: true Can be diabled for particular page\u0026rsquo;s front-matter\n--- ShowBreadCrumbs: false --- Edit Link for Posts Add a button to suggest changes by using the file path of the post to link to a edit destination.\nFor site config use:\nParams: editPost: URL: \u0026quot;https://github.com/\u0026lt;path_to_repo\u0026gt;/content\u0026quot; Text: \u0026quot;Suggest Changes\u0026quot; # edit text appendFilePath: true # to append file path to Edit link Can be modified for individual pages\n--- editPost: URL: \u0026quot;https://github.com/\u0026lt;path_to_repo\u0026gt;/content\u0026quot; Text: \u0026quot;Suggest Changes\u0026quot; # edit text appendFilePath: true # to append file path to Edit link --- The example above would yield the following link for the post file posts/post-name.md: https://github.com/\u0026lt;path_to_repo\u0026gt;/content/posts/post-name.md\nParameter Required Default Value editPost.URL true - editPost.appendFilePath false false editPost.Text false \u0026ldquo;Edit\u0026rdquo; Since the link generated is a regular HTML anchor tag \u0026lt;a href=...\u0026gt;, you can also use other URL schemas like mailto://, e.g. URL: \u0026quot;mailto://mail@example.com?subject=Suggesting changes for \u0026quot;\nOther Posts suggestion below a post Adds a Previous / Next post suggestion under a single post\nparams: ShowPostNavLinks: true Multiple Authors To Use multiple authors for a post, in post-variables:\n--- author: [\u0026quot;Me\u0026quot;, \u0026quot;You\u0026quot;] --- To use Multiple Authors Site-wide, in config.yml:\nparams: author: [\u0026quot;Me\u0026quot;, \u0026quot;You\u0026quot;] Comments to add comments, create a html file\nlayouts/partials/comments.html\nand paste code provided by your comments provider\nalso in config add this\nparams: comments: true read more about this hugo-comments\nAccessKeys c - ToC Open/Close g - Go To Top h - Home (according to current lang) t - Theme toggle / - Jumps to search page if in menu What\u0026rsquo;s AccessKeys ?\nEnhanced SEO Enabled only when env: production\nRich Results/Snippets Support Twitter Cards Support The Twitter Cards metadata, except twitter:image should not require additional configuration, since it is generated from metadata that you should already have (for instance the page title and description). The twitter:image uses the Post Cover Image, if present. In the absence of a cover images, the first image from the images frontmatter (a list) is used. images: - image_01.png - image_02.png Finally, if neither of those are provided, twitter:image comes from the first Page Bundle image with feature in the name, with a fallback to the first image with cover or thumbnail in the name. OpenGraph support The OpenGraph metadata, except og:image should not require additional configuration, since it is generated from metadata that you should already have (for instance the page title and description). The og:image uses the Post Cover Image, if present. In the absence of a cover images, the first image from the images frontmatter (a list) is used. images: - image_01.png - image_02.png Finally, if neither of those are provided, og:image comes from the first Page Bundle image with feature in the name, with a fallback to the first image with cover or thumbnail in the name. For pages, you can also add audio (using frontmatter audio: filename.ext) and/or videos. videos: - filename01.mov - filename02.avi Multilingual Support Misc Scroll-Bar themed (by default) Smooth Scroll between in-page links (by default) Scroll-to-Top Button (by default) Displays a Scroll-to-Top button in right-bottom corner Google Analytics integration Syntax highlighting RSS feeds ","permalink":"https://st-saint.github.io/posts/papermod/papermod-features/","summary":"Learn About All Features in PaperMod","title":"Features"},{"content":" Instruction Set Architecture representation LLVM Intel Meaning COMMONDq command qword ptr qword (64bit) ","permalink":"https://st-saint.github.io/posts/language/assembly/","summary":"Assembly","title":"Assembly"},{"content":" SLH LLVM SLH https://llvm.org/docs/SpeculativeLoadHardening.html sample original 1 2 3 4 5 6 7 8 9 10 void leak(int data); void example(int* pointer1, int* pointer2) { if (condition) { // ... lots of code ... leak(*pointer1); } else { // ... more code ... leak(*pointer2); } } transformation 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 uintptr_t all_ones_mask = std::numerical_limits\u0026lt;uintptr_t\u0026gt;::max(); uintptr_t all_zeros_mask = 0; void leak(int data); void example(int* pointer1, int* pointer2) { uintptr_t predicate_state = all_ones_mask; if (condition) { // Assuming ?: is implemented using branchless logic... predicate_state = !condition ? all_zeros_mask : predicate_state; // ... lots of code ... // // Harden the pointer so it can\u0026#39;t be loaded pointer1 \u0026amp;= predicate_state; leak(*pointer1); } else { predicate_state = condition ? all_zeros_mask : predicate_state; // ... more code ... // // Alternative: Harden the loaded value int value2 = *pointer2 \u0026amp; predicate_state; leak(value2); } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 uintptr_t all_ones_mask = std::numerical_limits\u0026lt;uintptr_t\u0026gt;::max(); uintptr_t all_zeros_mask = 0; void leak(int data); void example(int* pointer1, int* pointer2) { uintptr_t predicate_state = all_ones_mask; switch (condition) { case 0: // Assuming ?: is implemented using branchless logic... predicate_state = (condition != 0) ? all_zeros_mask : predicate_state; // ... lots of code ... // // Harden the pointer so it can\u0026#39;t be loaded pointer1 \u0026amp;= predicate_state; leak(*pointer1); break; case 1: predicate_state = (condition != 1) ? all_zeros_mask : predicate_state; // ... more code ... // // Alternative: Harden the loaded value int value2 = *pointer2 \u0026amp; predicate_state; leak(value2); break; // ... } } implementation details accumulating the predicate state through the control flow graph We accumulate it using the x86 conditional move instruction (cmov*) which also reads the flag registers where the state resides\nthese conditional move instructions are not to be predicted along each edge coming out of a conditional branch we do a conditional move that in a correct execution will be a no-op, but if misspeculated, will replace the %rax with the value of %r8. indirect branch, call and return we need to check where we came from rather than where we are going test the input to the jump table within each destination sample 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 # %bb.0: # %entry pushq %rax testl %edi, %edi jne .LBB0_4 # %bb.1: # %then1 testl %esi, %esi jne .LBB0_4 # %bb.2: # %then2 testl %edx, %edx je .LBB0_3 .LBB0_4: # %exit popq %rax retq .LBB0_3: # %danger movl (%rcx), %edi callq leak popq %rax retq ----- # %bb.0: # %entry pushq %rax xorl %eax, %eax # Zero out initial predicate state. movq $-1, %r8 # Put all-ones mask into a register. testl %edi, %edi jne .LBB0_1 # %bb.2: # %then1 cmovneq %r8, %rax # Conditionally update predicate state. testl %esi, %esi jne .LBB0_1 # %bb.3: # %then2 cmovneq %r8, %rax # Conditionally update predicate state. testl %edx, %edx je .LBB0_4 .LBB0_1: cmoveq %r8, %rax # Conditionally update predicate state. popq %rax retq .LBB0_4: # %danger cmovneq %r8, %rax # Conditionally update predicate state. ... ----- pushq %rax xorl %eax, %eax # Zero out initial predicate state. movq $-1, %r8 # Put all-ones mask into a register. jmpq *.LJTI0_0(,%rdi,8) # Indirect jump through table. .LBB0_2: # %sw.bb testq $0, %rdi # Validate index used for jump table. cmovneq %r8, %rax # Conditionally update predicate state. ... jmp _Z4leaki # TAILCALL .LBB0_3: # %sw.bb1 testq $1, %rdi # Validate index used for jump table. cmovneq %r8, %rax # Conditionally update predicate state. ... jmp _Z4leaki # TAILCALL .LBB0_5: # %sw.bb10 testq $2, %rdi # Validate index used for jump table. cmovneq %r8, %rax # Conditionally update predicate state. ... jmp _Z4leaki # TAILCALL ... .section .rodata,\u0026#34;a\u0026#34;,@progbits .p2align 3 .LJTI0_0: .quad .LBB0_2 .quad .LBB0_3 .quad .LBB0_5 ... checking the loads checking control transfers between procedures Strong SLH protect againt all Spectre v1 attacks divide the address space into a private and a public heap still leak the information by writing it into the public heap or through address-based side-channel Load address hardening SSLH assumes that all addresses of loads are protected LLVM-aSLH abstains from protecting \u0026#34;fixed\u0026#34; address (both the memory base and memory index are known at compile time).\nNot safe for stack pointer? skip the instrution pointer Store address hardening LLVM-aSLH does not harden addresses of store instruction the projection logic should be same as the load branch hardening branch conditons depend on the speculation predicate ","permalink":"https://st-saint.github.io/posts/literature/slh/","summary":"SLH \u0026amp; SSLH \u0026amp; USLH","title":"SLH"},{"content":" Aur LLVM90 compilation error error 1 2 3 4 llvm-project/llvm/utils/benchmark/src/benchmark_register.h:17:30: error: \u0026#39;numeric_limits\u0026#39; is not a member of \u0026#39;std\u0026#39; 17 | static const T kmax = std::numeric_limits\u0026lt;T\u0026gt;::max(); | ^~~~~~~~~~~~~~ patch llvm/utils/benchmark: add missing \u0026lt;limits\u0026gt; inclusion\n1 2 3 4 // /llvm-9.0.1.src/utils/benchmark/src/benchmark_register.h + #include \u0026lt;limits\u0026gt; #include \u0026lt;vector\u0026gt; ","permalink":"https://st-saint.github.io/posts/misc/llvm9-compilation/","summary":"llvm/utils/benchmark: add missing \u0026lt;limits\u0026gt; inclusion","title":"llvm-project/llvm/utils/benchmark/src/benchmark_register.h:17:30"},{"content":" Cargo Cargo is the Rust package manager. options descriptions build compile and build the project ","permalink":"https://st-saint.github.io/posts/language/rust/","summary":"Rust","title":"Rust"},{"content":" Constant-time In order for a function to be constant time, the branches taken and memory addresses accessed must be independent of any secret inputs Assuming that the fundamental processor instructions are constant time Tough to write and modify. Hard to verify Solutions A typical input to exercise every instruction so type system may not be necessary Valgrind could check all the branches and memory accesses to make sure that they haven\u0026#39;t been tainted with secret data. Keeping track of every bit in memory to know if it\u0026#39;s secret or not, likewise for all the CPU registers at bit level. Memcheck has done that. Just tell memcheck to treat the secret data as uninitialized notes The idea here is that any usage of secret data is unsafe. Memcheck helps to indentify all the usage of uninitialized data which is consistent with the secret data flow. This memcheck mechanism can just track the usage of the secret data. It could detect and help to elimitate using secret data as a condition, an index (hopefully also include the the address/pointer). REVIEW I feel this is sound, so what is the problem of ctgrind? Maybe it does not explore all the paths and hardware is hard to model https://blog.cr.yp.to/20140517-insns.html Misc A type system could probably help here ","permalink":"https://st-saint.github.io/posts/ctgrind/","summary":"Checking that functions are constant time with Valgrind.","title":"ctgrind"},{"content":" \u0026lt;2023-04-03 Mon\u0026gt; Ok, I guess math is also philosophy Programming language is also philosophy \u0026lt;2023-03-19 Sun\u0026gt;[0/4] 人贵自知 它猫猫的 怎么这么多b事 TODO Constant-time + Data-oblivious 读+测试 binsec/rel + pitchfork TODO ebpf parse bpd bytecode\n带 indirect jump 的 code 要怎么 parse 啊? instrument USLH\n真的有必要 USLH 吗, 又有点忘了 还真要, USLH 多了 rep, arith 虽然不知道为什么需要特殊处理 arith TODO type-system 做个 TAL/checked-C ++ 算了 普通 taint analysis 分析 secret independent control-flow + memory access TODO upfuzz dinv reconstruct output stream 普通记录个 bytestream 先 \u0026lt;2023-03-14 Tue\u0026gt; 怪不得故事里的反派会一脸欢愉地盘算着阴谋诡计，我终于有些理解他们的心情了\nemacs 配置真难做吧, project + vertico 搭配不好, sort 又慢, 可能还得自己写 cache 或者等 project.el 自己加 sort, workspace 也难搞的一b, 为什么所有人想的都是 restore 一个 layout 呢, 就没有人想单纯的切换一个基于 project 隔离 buffer 的工作区吗\n居然一晚上自己搞好了, 我真nb \u0026lt;2023-03-09 Thu\u0026gt;[0/0] 这些个 b paper 给个 git repo 不带 docker 给个勾八跑不起来的脚本全 tm 狗屎狗屎狗屎 bsbsbs \u0026lt;2023-03-08 Wed\u0026gt;[0/4] fk trt, 怎么会这么 jb 冷啊, 5点钟太阳直接照瞎, dt 还没地方玩 secure boot 好像也只是一个 checksum 证明一个 OS/image 是你知道的那个 image 吧, 但是也没有证明这个 OS/image 有哪个些 property 啊. 比如一个 application contact 说我不会恶意监控你的 sensor 扫你的盘, 我怎么知道这个 app 会不会遵守协议. 在 cloud 上对所有 application 先做 verification 加个 signature 再允许部署不好吗, 直接解决 peer adversary 的问题. 当然要 verify 的好像有点多 zero-knowledge 到底能证明什么 knowledge 啊, 感觉不能验证上面的东西, 但是只是证明自己知道个数也太弱了吧 network QoS的问题, 如果 NIC 一直 duplicate packet 去到两个独立的 server, 是不是用两倍的 bandwidth + server 资源可以保证 2-p 的 QoS.\n不过 2-p 的 QoS 好像也没好到哪去…… \u0026lt;2023-03-03 Fri\u0026gt;[1/1] DEFCON 上面应该没有 serverlesss attack 的 talk, 应该需要在 blackhat 上找找\nblackhat 也没有 \u0026lt;2023-03-02 Thu\u0026gt;[1/2] 为什么 Dynamic Link Library 跟 process isolation 可以兼容？process isolation 给每个 process 独立的 virtual address, 每个 process 访问 so 应该都需要拷贝一份到自己VA. 这 so 哪里 shared 了?\n不知道为什么记错 VA 的概念了, 整个 system 都使用一个 Virtual Address Space, 只是每个 process 被分配到一段 exclusive 的区域, 以 page 管理 dynamic library 是通过 RWX ACL share 的, 如果一个 process 试图改变 dynamic library 的 permission, 内核直接创建一份 dynamic library 的 copy 防止 poisoning ebpf 的 data segment 在 verifier 阶段是不确定的吗？ code segment 应该已经确定了 base address 不然 verifier 怎么做到 rewrtie indirect jumps to direct jumps? code 确定 data 不确定这合理吗 ","permalink":"https://st-saint.github.io/posts/diary/","summary":"Diary","title":"Diary"},{"content":" Related works ctgrind: dynamic analysis [Lan10] Flow-tracker: Rodrigues Silva [RQaPA16] ctverif: a static analyzer [ABB+16] drawback have to model the hardware correct hardware models are not easy to build [Ber14] Approach The approach is based on leakage detection tests Measure the execution time of 2 different input data classes Step 1. execution time classes definition fix-vs-random the first class input data is fixed to a constant value the second class input data is chosen at random for each measurement The fixed value might be chosen to trigger certain \u0026#34;special\u0026#34; corner-case processing (such as low-weight input for arithmetic operations). Cycle counters TSC register in intel systick peripheral in ARM Environmental conditions The class assignment and input preparation tasks are prior to the measurement Step 2. Apply post-processing cropping crop the measurements that are larger than a fixed, class-independent threshold Higher-order preprocessing idk Depending on the statistical test applied, it may be beneficial to apply some higherorder pre-processing, such as centered product [CJRR99] mimicking higher-order DPA attacks. Higher-order leakage detection tests already appeared in other contexts [SM15].\nStep 3: Apply statistical test apply a statistical test to the hypothesis \u0026#34;the two timing distributions are equal\u0026#34; t-test Welch’s t-test Non-parametric tests rely on fewer assumptions about the underlying distributions converge slower and require more samples ","permalink":"https://st-saint.github.io/posts/dudect/","summary":"Dude, is my code constant time?","title":"dudect"},{"content":" Notes MTO \u0026amp; ORAM Memory-trace obliviousness (MTO): Even an adversary that observes memory, bus traffic, and access times while the program executes can learn nothing about the program\u0026#39;s sensitive input and output. One way to achieve MTO is to employ Obilivous RAM (ORAM), allocating all code and data in a single ORAM bank, and to also disable caches or fix the rate of memory traffic. Naive Implementations The simplest way to deploy ORAM is to implement a single, large ORAM bank that contains all the code and data 10x - 100x overhead ","permalink":"https://st-saint.github.io/posts/literature/ghostrider/","summary":"A compiler and architecture supports privacy preserving computation in the cloud","title":"GhostRider"},{"content":" 1 2 3 ((token, signature) =\u0026gt; { return jwt.verify(token, signature) }) (\u0026#34;eyJhbGciOiJIUzI1NiJ9.eyJuYW1lIjoiWWF5dSBXYW5nIiwiZW1haWwiOiJ5YXl1d2FuZ0Bjcy51YmMuY2EifQ.e-5G_qdh02Srl8TLWTPVld1SPHdusRKJHibCDiekVtc\u0026#34;, \u0026#34;再次鼓起失去的勇气. Regain lost courage.\u0026#34;) ","permalink":"https://st-saint.github.io/posts/email/","summary":"Email","title":"Email"},{"content":" Terminology Judgement A judgement is something we may know, that is, an object of knowledge A judgement is evident if we in fact know it \\(e:t\\) ⇒ the expression e has type t \\(\\Gamma\\) ⇒ Context: a set of \u0026lt;variable, type\u0026gt; pairs\n\\(\\vdash\\) ⇒ turnstile \\(\\Gamma \\vdash e : t\\) ⇒ expression e has type t in the context \\(\\Gamma\\) \\(\\Gamma , x:\\tau\\) ⇒ extends \\(\\Gamma\\) with knowledge: \\(x:\\tau\\) Inference Rules \\(\\frac{P1\\ P2\\ P3\\ ...}{C}\\)\nC ⇒ conclusion P ⇒ premise If we konw P1 \u0026amp; P2 \u0026amp; P3 then we know C Derivation In ML, a typing derivation is a proof that some expression can have some type, given a particular context, not that the expression can only have that type or that the expression will have that type no matter where we encounter it.\na derivation for ρ ⊢ e : t is a proof that in some context ρ (which assigns types to variables in e), we can show that e can have (at least) the type t, and possibly others.\nThe one-step evaluation relation → is the smallest binary relation on terms When the pair (t , t\u0026#39;) is in the evaluation relation, we say that \u0026#34;the evaluation statement (or judgment) t → t\u0026#39; is derivable.\u0026#34; Derivation Tree \\begin{equation} \\notag \\large \\dfrac{\\dfrac{\\dfrac{x:Bool \\in x: Bool}{x:Bool \\vdash x:Bool}}{\\vdash \\lambda x:Bool . x : Bool \\rightarrow Bool} \\qquad \\dfrac{}{\\vdash true: Bool} }{\\vdash (\\lambda x: Bool.x )\\ true: Bool} \\end{equation} Reduction Also known as subject evaluation, type preservation or simply preservation\n$$\\frac{\\Gamma \\vdash e_1:\\tau\\qquad e_1 \\rightarrow e_2}{\\Gamma \\vdash e_2:\\tau}$$ $$\\frac{}{if\\ True\\ then\\ e1\\ else\\ e2 \\rightarrow e1}$$ $$\\frac{e \\Downarrow True}{if\\ e\\ then\\ e1\\ else\\ e2}$$ $${if\\ True\\ then\\ e1\\ else\\ e2\\ \\rightarrow\\ e1}$$ Substitution $$[x \\rightarrow s]x = s$$ $$e[x \\backslash e^a] == [ x \\rightarrow e^a] e$$ \\begin{align} \u0026amp; [ x \\rightarrow e^{\u0026#39;}](let y=e_1\\; in\\; e_2 ) \\\\ = \u0026amp; let y = [x \\rightarrow e^{\u0026#39;}]e_1\\; in\\; [x \\rightarrow e^{\u0026#39;}]e_2 \\end{align} Unification 推导 (deduction) landin\u0026#39; knot represent recursion\n13.5.8 Refinement Types Introduction programs can do things wrong:\nDivided by zero Buffer overflow mismatched dimension\nwrong type casting logic bug\ninteger range [min, max] Correctness error Refinement type system uses predicates to enrich the type information passes STCL branch conditions – path-sensitive infer refinements type polymorphism – context-sensitive polymorphic data types refinement polymorphism for different invariants verify termination??? proof proposition over UDF Simply Typed λ-calculus primitive constants: nat primitive operations: add function type with constrain Verification Conditions take the annotated program as input and return a VC arithmetic overflow seems like we can simply add a upper bound (2^31 or 2^63) to avoid overflow here Branches and Recursion also convert to branches conditions to similar VC questions Differences between refinement type system and symbolic execution To formally verify the division by, buffer overflow and integer range problems, refinement type system also add predicates and constrains over variable and use SMT solver to resolve these constrains, so what does refinement types do differently? or actually symbolic execution is one component of refinement type system? what would the refinement type system do if the conditions cannot be solved by SMT? if the condition cannot be satisfied, then it should be a logic bug? it is a bit confusing that how could you verify termination with a recursion function? Sized Types Input makes the program unpredictable. The inputs can taint data or even the control-flow, making memory mess and analysis tricky. Sized type system is to\ncheck computation of each stream element terminates. express bounds on the sizes of recursive data structures. productive a request for the first i element of the stream is guaranteed to be processed in finite time means the program is productive I guess head is to read the first element of a stream and tail is the stream excluding the first element so we introduce type: ST^i for streams with at least i elements using sized types we can infer the lower bounds on the size of all the streams if we can claim a function has a type: ST^i -\u0026gt; ST^j \u0026amp;\u0026amp; i\u0026gt;j then we can prove termination Primitive Recursion: Reverse sized type system can prove termination or productivity of functions in primitive recursive form 1 2 3 4 5 reverse :: \\forall i. \\forall t. LIST_i t -\u0026gt; LIST_i t reverse xs = case xs of Nil -\u0026gt; Nil Cons y ys -\u0026gt; append (reverse ys) (Cons y Nil) Nil -\u0026gt; Nil has type LIST_{i+1} t (why i+t though) append (Reverse ys) (Cons y Nil) :: LIST_{i+1} -\u0026gt; t Accumulating Parameters allow a limited form of polymorphic recursion: over sizes, but not types. Array Bounds Check We view an array as a function from indices to contents\nan array of t with 6 elements has type NAT_6 -\u0026gt; t questions I guess Mk and ST are all special keywords and ST is stream. However I still don\u0026#39;t get what how to combine a NAT and a ST Sized Type consider the length of the stream instead the value of streams. I think the value of input is also important. For example, the Array Bounds Check problem, a common scenario is the array having a dynamic length (i.e. depends on input), and the length becomes unknown to tpye system. So if we want to constrain the input refinement type sounds more reasonable but it will probably become a SAT problem. Even though I feel memory allocation is still a conflict between efficiency and safety. If you allow dynamically length it is more tricky to prove the safety but you gain some flexibility. Is it possible to combine sized type and refinement type to check more security properties of the program? typing vs typechecking 顶不住了, 先看看中文文档吧 typing-vs-typechecking 本体论(Ontology) 类型是一种抽象的实体(entity) 类型不是名称 类型 = 分类？ 不是 不是为了对现有对象\u0026#34;分类\u0026#34;, 因为被“分类”的对象都是先前毫无意义, 只是通过这个类型才确定的, 而且具有这样类型的值 只可能有一种完全等价的 构造方式, 这就是所谓的 unit type 的实例 类型是什么 对于某个类型系统中的类型——这种人为设计中的一份子 类型系统的设计者或者类型的设计者（类型系统的用户）希望它是什么 历史上的类型是什么 罗素悖论 - 类型论\n任给一个性质(例如：\u0026#34;年满三十岁\u0026#34;就是一个性质)，满足该性质的所有集合总可以组成一个集合 设有一性质P，并以一性质函数表示：P(x)，且其中的自变量x有此特性： x ∉ x，\n不是, x ∉ x 是什么意思 我靠我一直觉得 PL 讲的 type 本质都应该是数学集合, 好像还是有点道理, 然而类型系统好像是集合论的上位(也许)替代 类型的意义 各种类型论中, 并没有要求\u0026#34;类型\u0026#34;成为和某种领域外实体的对应, 以作为建模或\u0026#34;分类\u0026#34;的基础, 而仅仅是项 (term) 上关联的一些抽象实体 派生概念 类型正确(Type Correctness) 符合期望 类型是开发者对数据、对实体属性的描述, 显式类型是开发者对于程序设计的理解和限定的直接描述\n原文对可读性和重构的考虑脱离实际 使用 var, auto 借用 Type inference 省去对数据的描述是让开发者在上下文中丢失对数据的理解, 且不便于第三方审阅代码; 在重构时, 考虑代码改动对数据, 对上下文的影响是非常重要且易错的环节, 显式类型要求开发者对语义的改变进行考虑(当然如果开发者匆匆掠过是另一个问题), 类型推断提供了开发便利但不利于保证程序正确性 即使使用 var, auto ，一个不可忽视的事实是, 编译器生成的 binary 并不包含 var 类型, 实际 runtime 类型有且只有一个具体类型(如果有 runtime type), 如果没有 runtime type 那么数据就只是纯粹的数据而不带任何限制, 这与源代码中 var, auto 所表达的类型不匹配, 而开发者因代码和运行时的差异对程序行为做出错误预测是非常不理想的设计缺陷 一个可以接受的选择是type system在编译前就将 auto 替换成具体类型 类型识别(Type Identification) 要判断类型是否相同, 比较给定的表示类型的数据结构（类型标识）和已知类型的对应数据结构是否相等 类型转换(Type Conversion) 强制(coercion) 是一种隐式转换 多态(ad-hoc polymorphism) 而和铸型(casting) 显式转换 类型安全(Type Safety) 较常用的一种安全机制的基本思路是，定义类型是某个域(domain)中值的集合, 保证类型安全需要考察的值是否总是符合其对应类型的约束.\n判断对象语言描述的程序是否符合类型安全这项任务能被程序表达和实现(包括语言自身的实现, 如编译时的检查). 这样, 类型安全可以视为某一些语言规则中蕴含的性质 当语言的规则不足以保证它表达的任意操作产生的值属于规则事先指定的值的集合之内, 这些规则就不是安全的 安全一般考虑两个方面, 一个是 confidentiality, 一个是 integrity\n未定义行为说成类型不安全其实是符合安全的描述的, 对应 integrity 的 control-flow \u0026amp; information-flow integrity 类型检查(Typechecking) 现实的类型安全一般通过在语言设计中由两类手段提供支持\n语言的构造性规则限制不安全类型构造的表达 – typing 语言对潜在不安全的表达进行额外的语义检查 – type checking (广义地也能包含typing) 尽管一般实现 typechecking 蕴含解一个判定性问题 – 即作用于代码上判断出一个表示 \u0026#34;通过\u0026#34; 或\u0026#34;不通过\u0026#34;的二元结果, 却并不一定表示接受或者拒绝接受程序\n一条语言规则不会因为实现要求附加其它行为或不要求任何可预测的行为 (所谓未定义行为) 而不适合归类为 typechecking 规则; 举例: C 的许多使用非兼容类型 (compatible type) 的值的操作是未定义行为, 这不是 typing, 而指定了作用于指针类型上的 typechecking 静态/动态 类型 静态类型或者动态类型都和 typing 的时机有关; 而单纯静态/动态, 对彻底不提供类型系统设计的 typeless 的语言都可能说得通 强类型 强类型 (strong type/strong typing/strongly typed) manifest typing/latent typing Dependent typing a dependent type is a type whose definition depends on a value dependent types are used to encode logic\u0026#39;s quantifiers like \u0026#34;for all\u0026#34; and \u0026#34;there exists\u0026#34;\nTwo common examples of dependent types are dependent functions, which correspond to \u0026#34;for all\u0026#34; and dependent pairs, which correspond to \u0026#34;there exists\u0026#34;. The return type of a dependent function may depend on the value (not just type) of one of its arguments.\nDeciding the equality of dependent types in a program may require computations. If arbitrary values are allowed in dependent types, then deciding type equality may involve deciding whether two arbitrary programs produce the same result\nthe decidability of type checking may depend on the given type theory\u0026#39;s semantics of equality, that is, whether the type theory is intensional or extensional. Formal definition Π type dependent types are similar to the type of an indexed family of sets formally, given a type A: U in a universe of types U, one may have a family of types B: A \\to U, which assigns to each term a: A a type B(a): U. We say that the type B(a) varies with a. A function whose type of return value varies with its argument (i.e. there is no fixed codomain) is a dependent function and the type of this function is called dependent product type, pi-type (Π type) or dependent function type.\nWritten as \\Pi_{(x:A)} B(x) Σ type The dual of the dependent product type is the dependent pair type, dependent sum type, sigma-type If, in the universe of types U, there is a type A: U and a family of types B: A \\to U, then there is a dependent pair type \\sum_{x:A} B(x) The dependent pair type captures the idea of an ordered pair where the type of the second term is dependent on the value of the first. If (a,b):\\sum_{x:A}B(x) then a: A and b: B(a) Extra reading Extensional and intensional definitions Intensional definition An intensional definition gives meaning to a term by specifying necessary and sufficient conditions for when the term should be used. intensional definitions are best used when something has a clearly defined set of properties, and they work well for terms that have too many referents to list in an extensional definition. Extensional definition An extensional definition gives meaning to a term by specifying its extension, that is, every object that falls under the definition of the term in question. An explicit listing of the extension, which is only possible for finite sets and only practical for relatively small sets, is a type of enumerative definition. Extensional definitions are used when listing examples would give more applicable information than other types of definition, and where listing the members of a set tells the questioner enough about the nature of that set. A fundamental distinction is extensional vs intensional type theory. In extensional type theory, definitional (i.e., computational) equality is not distinguished from propositional equality, which requires proof. As a consequence type checking becomes undecidable in extensional type theory because programs in the theory might not terminate. For example, such a theory allows one to give a type to the Y-combinator; a detailed example of this can be found in Nordstöm and Petersson Programming in Martin-Löf\u0026#39;s Type Theory.[2] However, this does not prevent extensional type theory from being a basis for a practical tool; for example, NuPRL is based on extensional type theory.\nintuitionistic logic In the semantics of classical logic, propositional formulae are assigned truth values from the two-element set \\top, \\bot (\u0026#34;true\u0026#34; and \u0026#34;false\u0026#34; respectively)\nThis is referred to as the \u0026#39;law of excluded middle\u0026#39;, because it excludes the possibility of any truth value besides \u0026#39;true\u0026#39; or \u0026#39;false\u0026#39; Propositional formulae in intuitionistic logic are not assigned a definite truth value and are only considered \u0026#34;true\u0026#34; when we have direct evidence, hence proof. if there is a constructive proof that an object exists, that constructive proof may be used as an algorithm for generating an example of that object, a principle known as the Curry–Howard correspondence between proofs and algorithms. the double negation of the law is retained as a tautology of the system: that is, it is a theorem that \\neg(\\neg (P \\vee \\neg P)) regardless of the proposition P In intuitionistic logic, only P \\rightarrow \\neg\\neg P is theorem, \\neg\\neg P \\rightarrow P is not First-order logic First-order logic—also known as predicate logic, quantificational logic, and first-order predicate calculus Predicate logic is an extension of propositional logic, adding quantifiers. Curry–Howard correspondence Curry–Howard correspondence (also known as the Curry–Howard isomorphism or equivalence) is the direct relationship between computer programs and mathematical proofs.\nA proof is a program, and the formula it proves is the type for the program General formulation Logic side Programming side universal quantification generalised product type (Π type) existential quantification generalised sum type (Σ type) implication function type conjunction product type disjunction sum type true formula unit type or top type false formula empty type or bottom type hypotheses free variables implication elimination (modus ponens) application implication introduction abstraction assumption variable axiom schemes combinators modus ponens application deduction theorem abstraction elimination Hilbert-style deduction systems axiom schemes α → (β → α)\nK: λ xy.x (α → (β → γ)) → ((α → β) → (α → γ))\nS: λ xyz.(x z (y z)) formalization Let Γ be a finite collection of formulas, considered as hypotheses. Then δ is derivable from Γ, denoted Γ ⊢ δ, in the following cases:\nδ is an hypothesis, i.e. it is a formula of Γ, δ is an instance of an axiom scheme; i.e., under the most common axiom system:\nδ has the form α → (β → α), or δ has the form (α → (β → γ)) → ((α → β) → (α → γ)), δ follows by deduction, i.e., for some α, both α → δ and α are already derivable from Γ (this is the rule of modus ponens) From System F to Typed Assembly Language abstract type-preserving transformation from the System-F to Typed Assembly Language (TAL) admit low-level compiler optimization CPS \u0026amp; A polymorphic closure conversion phases Get type-correct source program and map it to type-correct ASM Compiler question suitable for use in systems where untrusted and potentially malicious code must be checked for safety before execution. but in untrusted environment usually we could only access binary without source code CPS conversion, closure conversion, unboxing, subsumption elimination, or region inference introduction some type information are lost admits most conventional low-level optimizations such as\nglobal register allocation copy propagation constant folding dead-code elimination. Except for a small number of atomic code patterns. What patterns? support code motion\ninstruction scheduling common-subexpression elimination loop-invariant removal not support\nrun-time code generation intensional polymorphism array bounds check elimination SPIN type-check in Linux kernel overview TAL type-preserving compiler workflow λ^F -\u0026gt; CPS conversion λ^k -\u0026gt; Closure conversion λ^C -\u0026gt; Hoisting λ^H -\u0026gt; Allocation λ^A -\u0026gt; Code Generation System-F polymorphic λ-calculus CPS continuation passnig style – eliminates the need for a control stack all unconditional control transfer: function invocation and return are achieved via function call. λ^K λ^K consists of a series of let bindings followed by a function call only one abstraction for both type and value variables halt? functions do not return values but it just jumps expression never return values ∆; Γ ⊢_K e indicates that the term e is well formed Translation K_exp 〚 e 〛 takes a continuation k, computes the value of e and hands that value to k variable capture? can all STLC be transformed into CPS? a realistic CPS-converter would eliminate \u0026#34;administrative\u0026#34; redices and optimize tail recursion Simplified polymorphic closure conversion Making closure explicit and therby separating program code from data\nrewrite functions so that there is no free varaibles. how?\nfunction calls are performed by calling code with the environment as an addtional argument hoisting: lift the code blocks to the top of the program adopt the type-erasure interpretation of polymorphism which substitude the free type variables directly into code blocks Translation C〚·〛: β represent the type of the value environment for the closure Hoisting fix is no longer a value form. code blocks are defined by letrec prefix letrec and mutually recursive and CPS? Explicit allocation eliminate the value form for tuples introduce new declaration forms for allocating and initializing tuples\nn-element tuple can be separated into an allocation and n initialization Translation memory layout of nested structure? Typed Assembly language simultaneously abstract\na type environment a set of type arguments a set of value arguments assume an infinite supply of registers\nif it is finite, spilling registers into a tuple and reloading values from this tuple distinguishable labels and registers TAL syntax TAL machine state:\nheap register file instructions TAL Operational Semantics a type-erasure interpretation does not erase the type from the semantics TAL Static Semantics specify when programs are well formed and ensure the program will not get stuck formation judgments are for heaps + register file + instructions Code generation For translation of function types, registers are assigned to value arguments\nx = v ⇒ mov r_x, v x = v_1 P v_2 ⇒ mov r_x, v1; arith r_x, r_x, v_2 if0(v, e_1, e_2) ⇒ mov r_tmp, v; bnz r_tmp, ℓ[α]; I_1 … Optimization how to reason the soundness of optimization?\nmeasure the equivalence? imaging a code snippet as a block-box B. after some optimization, we can get a block-box B\u0026#39; which generates exactly some output as B for arbitrary input but require less latency. that sounds so weird how could know what attributes are lost or kept during the optimization? ","permalink":"https://st-saint.github.io/posts/typesystem/","summary":"I don\u0026#39;t know what is type system","title":"Type System"},{"content":" KVM bridge NOTE: start dhcpcd.service 1 2 3 4 5 6 7 8 9 10 nmcli connection add type bridge ifname br0 stp no nmcli connection add type bridge-slave ifname enp7s0 master br0 nmcli connection show --active nmcli connection down bridge-br0 nmcli connection down Wired\\ connection\\ 1 nmcli connection show nmcli connection up bridge-br0 nmcli connection up bridge-slave-enp7s0 kernel compilation 1 2 3 4 5 make -j24 \u0026amp;\u0026amp; \\ sudo make -j24 modules_install headers_install install \u0026amp;\u0026amp; \\ sudo cp arch/x86_64/boot/bzImage /boot/vmlinuz-6.0-ebpf-x86_64 \u0026amp;\u0026amp; \\ sudo mkinitcpio -p linux60-ebpf \u0026amp;\u0026amp; \\ sudo update-grub Cannot find LILO manually update boot loader 1 sudo pacman -S grub install 1 sudo make -j24 modules_install headers_install install mkinitcpio 1 sudo mkinitcpio -p linux60 # /etc/mkinitcpio.d/linux60.preset # mkinitcpio preset file for the \u0026#39;6.0-x86_64\u0026#39; package ALL_config=\u0026#34;/etc/mkinitcpio.conf\u0026#34; ALL_kver=\u0026#34;/boot/vmlinuz-6.0-x86_64\u0026#34; PRESETS=(\u0026#39;default\u0026#39; \u0026#39;fallback\u0026#39;) #default_config=\u0026#34;/etc/mkinitcpio.conf\u0026#34; default_image=\u0026#34;/boot/initramfs-6.0-x86_64.img\u0026#34; #default_options=\u0026#34;\u0026#34; #fallback_config=\u0026#34;/etc/mkinitcpio.conf\u0026#34; fallback_image=\u0026#34;/boot/initramfs-6.0-x86_64-fallback.img\u0026#34; fallback_options=\u0026#34;-S autodetect\u0026#34; serial console change the grub config # /etc/default/grub GRUB_TERMINAL=\u0026#34;serial console\u0026#34; GRUB_CMDLINE_LINUX_DEFAULT=\u0026#34;console=ttyS0,115200n8\u0026#34; GRUB_SERIAL_COMMAND=\u0026#34;serial --speed=115200 --unit=0 --word=8 --parity=no --stop=1\u0026#34; systemctl enable serial-getty@ttyS0.service systemctl start serial-getty@ttyS0.service gdb kernel config Build the kernel with CONFIG_GDB_SCRIPTS enabled, but leave CONFIG_DEBUG_INFO_REDUCED off. Turn off KASLR if necessary by adding “nokaslr” to the kernel command line. If your architecture supports CONFIG_FRAME_POINTER, Enable FRAME_POINTER!!! QEMU/KVM Add qemu commandline -s stands for -gdb \u0026amp; tcp:1234 1 2 3 4 5 6 7 8 9 10 \u0026lt;domain type=\u0026#39;kvm\u0026#39; xmlns:qemu=\u0026#39;http://libvirt.org/schemas/domain/qemu/1.0\u0026#39;\u0026gt; \u0026lt;qemu:commandline\u0026gt; \u0026lt;qemu:arg value=\u0026#39;-s\u0026#39;/\u0026gt; \u0026lt;/qemu:commandline\u0026gt; \u0026lt;!-- or --\u0026gt; \u0026lt;qemu:commandline\u0026gt; \u0026lt;qemu:arg value=\u0026#34;-gdb\u0026#34;/\u0026gt; \u0026lt;qemu:arg value=\u0026#34;tcp::1235\u0026#34;/\u0026gt; \u0026lt;/qemu:commandline\u0026gt; \u0026lt;/domain\u0026gt; Attach Copy vmlinux from Linux kernel root directory first gdb ./vmlinux target remote :1234 lx-symbols Edit ~/.config/gdb/gdbinit add-auto-load-safe-path /PATH/linux/scripts/gdb/vmlinux-gdb.py Image qemu qcow2 virtual box vmdk vmware vmdk unzip OVA → 1 2 tar -xf ova-file.ova qemu-img convert -O qcow2 vmdk-file.vmdk qcow2-file.qcow2 boot from disk 1 qemu-system-x86_64 -drive format=qcow2,file=fact.qcow2 ","permalink":"https://st-saint.github.io/posts/virtualmachine/","summary":"Setup KVM with customized Linux kernel","title":"VirtualMachine"},{"content":" Configuration Save history set history save on Layout Kernel Debugging 1 2 3 4 5 6 7 8 9 (gdb) apropos lx function lx_current -- Return current task function lx_module -- Find module by name and return the module variable function lx_per_cpu -- Return per-cpu variable function lx_task_by_pid -- Find Linux task by PID and return the task_struct variable function lx_thread_info -- Calculate Linux thread_info from task variable lx-dmesg -- Print Linux kernel log buffer lx-lsmod -- List currently loaded modules lx-symbols -- (Re-)load symbols of Linux kernel and currently loaded modules ","permalink":"https://st-saint.github.io/posts/gdb/","summary":"GDB","title":"GDB Cheat Sheet"},{"content":" JIT definition The just-in-time (JIT) compilation generates and execute bytecode at runtime rather than before execution. JIT design In a bytecode-compiled system, source code is translated to an intermediate representation known as bytecode. The bytecode may then be interpreted by, or run on a virtual machine. The JIT compiler compiles the bytecodes dynamically into machine code so the program can run faster. The code can be compiled when it is about to be executed (hence the name \u0026#34;just-in-time\u0026#34;), and then cached and reused later without needing to be recompiled. Java The JIT compiler helps improve the performance of Java programs by compiling bytecodes into native machine code at run time. Can the JIT compiler decompile methods? Typically, the JIT compiler does not decompile methods. However, in rare instances the JIT compiler is forced to decompile a method. Such instances arise when the JIT compiler applies speculative optimizations based on compile-time assumptions, the assumptions are later violated, and the JIT compiler is then unable to recompile the method. Due to implementation restrictions, such methods remain interpreted until the end of the application. JIT Optimization(Java) Phase 1 - inlining Inlining is the process by which the trees of smaller methods are merged, or \u0026#34;inlined\u0026#34;, into the trees of their callers.\nTrivial inlining Call graph inlining Tail recursion elimination Virtual call guard optimizations Phase 2 - local optimizations ","permalink":"https://st-saint.github.io/posts/jit/","summary":"JIT summary","title":"JIT"},{"content":" shell for loop 1 2 for it in $array; do done time 1 2 date \u0026#34;+%F %H:%M:%S.%N\u0026#34; # 2023-01-25 23:55:00.152982295 copy to clipboard 1 echo \u0026#34;copy\u0026#34; | xclip -set clip sort options -k [n, m] 选择区间 -t g分隔符 -M 排序月份 -n 以数值型进行排序 -h 可读的数字(带单位) -f 忽略大小写 example sed replace 1 2 sed -E -i \u0026#39;s/SEARCH_REGEX/REPLACEMENT/g\u0026#39; INPUTFILE sed -E -i \u0026#39;s/Xft.dpi: [0-9]+/Xtf.dpi 144/g\u0026#39; ~/.Xresources -i - Don\u0026#39;t write the output to stdout. s - The substitute command. /// - Delimiter character. It can be any character but usually the slash (/) character is used. g - Global replacement flag. All occurrences are replaced if g provided. tmux config 1 2 3 4 5 6 unbind C-b set-option -g prefix M-Space bind-key M-Space send-prefix set -g default-terminal screen-256color set-option -ga terminal-overrides \u0026#34;,*256col*:Tc\u0026#34; options start tmux new -s *SESSION_NAME* attach tmux a -t *SESSION_NAME* detach send-prefix d create window send-prefix c jobs list background process jobs environment condition 中括号 单中括号 [ ] 两个符号左右都要有空格分隔 内部操作符与操作变量之间要有空格：如 [ \u0026#34;a\u0026#34; = \u0026#34;b\u0026#34; ] 字符串比较中，\u0026gt; \u0026lt; 需要写成\u0026gt; \\\u0026lt; 进行转义 中字符串或者${}变量尽量使用\u0026#34;\u0026#34;双引号扩住，以避免值未定义引用而出错 中可以使用 –a –o 进行逻辑运算 是 shell 内置命令 双中括号 [[ ]] 两个符号左右都要有空格分隔 [[ ]] 内部操作符与操作变量之间要有空格：如 [[ \u0026#34;a\u0026#34; = \u0026#34;b\u0026#34; ]] [[ ]] 字符串比较中，可以直接使用 \u0026gt; \u0026lt; 无需转义 [[ ]] 中字符串或者${}变量尽量使用\u0026#34;\u0026#34; 双引号扩住，如未使用\u0026#34;\u0026#34;会进行模式和元字符匹配 [[ ]] 内部可以使用 \u0026amp;\u0026amp; || 进行逻辑运算 [[ ]] 是 bash keyword example equal 1 2 3 if [[ $randm == 1 ]] ; then echo $random == 1 fi not equal 1 2 3 if [[ $randm != 1 ]] ; then echo $random != 1 fi exist environment variable check if a environment variable is set 1 2 if [[ -z ${env} ]]; then fi command check if a command exists 1 2 if ! command -v python \u0026amp;\u0026gt; /dev/null fi 文件夹或文件 文件夹 1 2 if [ ! -d \u0026#34;folder\u0026#34; ] ; then fi 文件 1 2 if [ ! -f \u0026#34;file\u0026#34; ] ; then fi find files 1 2 3 4 find ./fuzz-results/crashes -type f -name \u0026#34;id:$1*\u0026#34; -print0 | while read -d $\u0026#39;\\0\u0026#39; file do echo $file done xargs 多行转单行输入, 默认分隔符为换行\n1 pacman -Q | grep -i \u0026#34;haskell\u0026#34; | xargs sudo pacman -S --noconfirm placeholder\n1 2 xargs -I {} mv dir1/{} dir2/{} xargs -I \u0026#39;{}\u0026#39; mv dir1/\u0026#39;{}\u0026#39; dir2/\u0026#39;{}\u0026#39; stream symbol meanings 0 stdin 1 stdout 2 stderr 2\u0026gt;\u0026amp;1 stderr to stdout 1\u0026gt; stdout redirect 2\u0026gt; stderr redirect 1\u0026gt;/dev/null write to void uniq 仅输出 unique 行\n1 uniq -u grep \u0026amp; rg grep pacman 清除 sudo pacman -R $(pacman -Qdtq) zip zip -q 不显示命令 -r 递归 -y 不解析 symbol link 1 zip -qry zip_file.zip file1 file2 dir1 -d 1 unzip jacoco-0.8.7.zip -d jacoco tar 解压 1 tar -xzvf sample.tar.gz -C ./sample 压缩 1 tar -czf sample.tar.gz ./sample kernel dependencies 1 sudo apt-get install libncurses-dev gawk flex bison openssl libssl-dev dkms libelf-dev libudev-dev libpci-dev libiberty-dev autoconf llvm network iw 格式 1 2 3 iw [ OPTIONS ] { help [ command ] | OBJECT COMMAND } OBJECT := { dev | phy | reg } OPTIONS := { --version | --debug } 搜索 1 iw dev \u0026lt;devname\u0026gt; scan 显示设备 1 iw dev 显示设备信息 1 iw dev \u0026lt;devename\u0026gt; info 显示连接信息 1 iw dev \u0026lt;devname\u0026gt; link 连接 1 2 iw dev \u0026lt;devname\u0026gt; connect [-w] \u0026lt;SSID\u0026gt; [\u0026lt;freq in MHz\u0026gt;] [\u0026lt;bssid\u0026gt;] [key 0:abcde d:1:6162636465] [mfp:req/opt/no] # Join the network with the given SSID (and frequency, BSSID). Network Manager 扫描 1 nmcli device wifi rescan 显示 1 nmcli device wifi list 连接 1 nmcli device wifi connect \u0026lt;SSID\u0026gt; password \u0026lt;password\u0026gt; [hidden yes] High DPI Netease Music #/opt/netease/netease-cloud-music/netease-cloud-music.bash export QT_SCALE_FACTOR=2 ghidra #/opt/ghidra/support/launch.properties VMARGS_LINUX=-Dsun.java2d.uiScale=2 Wechat #/opt/apps/com.qq.weixin.deepin/files/run.sh export DEEPIN_WINE_SCALE=2.00 user management add user 连接到服务器 1 ssh root@10.105.250.92 创建用户 1 adduser example 添加 sudo 1 adduser example sudo ssh pem 生成密钥 1 2 3 sudo su example cd ~/.ssh ssh-keygen -t ed25519 -C \u0026#34;example@mail.com\u0026#34; 修改权限 1 2 3 cp ed25519.pub authorized_keys chmod 600 authorized_keys chmod 700 ~/.ssh 拷贝密钥 1 scp root@10.105.250.92:/home/example/.ssh/ed25519 ~/.ssh/ ssh sshd Match User yayu X11Forwarding yes X11UseLocalhost no AllowTcpForwarding yes ssh Host github.com HostName github.com User git IdentityFile ~/.ssh/yayu Archlinux pacman refresh pgp sudo pacman-key --refresh-keys yay option description -S install -Ss search the package –mflags –skipinteg skip validaty check -R remove -Rs Remove dependencies not required by other packages –overwrite \u0026lt;glob\u0026gt; Bypass file conflict checks and overwrite conflicting files Bluetooth pair $ bluetoothctl # power on # default-agent # scan on [NEW] Device 00:12:34:56:78:90 Air Pods # pair 00:12:34:56:78:90 # connect 00:12:34:56:78:90 airpods # /etc/bluetooth/main.conf ControllerMode = bredr module install/load 1 modprobe \u0026lt;module\u0026gt; remove 1 rmmod \u0026lt;module\u0026gt; nouveau blacklist # /etc/modprobe.d/nvidia.conf blacklist nouveau Remove kms from the HOOKS array in /etc/mkinitcpio.conf regenerate the initramfs 1 mkinitcpio -p linux keyboard layout xmodmap caps_lock -\u0026gt; control # ~/.Xmodmap clear lock clear control keycode 66 = Control_L add control = Control_L Control_R setxkbmap -option caps:ctrl_modifier 1 setxkbmap -option caps:ctrl_modifier ","permalink":"https://st-saint.github.io/posts/linux/","summary":"linux manual","title":"Linux Cheat Sheet"},{"content":" Dockerfile Docker command run 1 2 3 4 docker run [OPTIONS] IMAGE [COMMAND] [ARG...] # example docker run -it --name sample_docker ubuntu:20.04 /bin/bash description 创建和启动一个新的容器实例 create and start a new container instance options Option Description –name Name -i Keep STDIN open even if not attached -t Allocate a pseudo-TTY exec description 已运行的容器中, 执行命令 options Option Description -i interaction -t terminal -w workspace start 1 docker attach docker_name/docker_id [-i] -i interact volume 1 docker run -v /local_path:/docker_path -it --name sample_docker ubuntu:20.04 /bin/bash attach 1 docker attach [docker_name/docker_id] ","permalink":"https://st-saint.github.io/posts/language/docker/","summary":"Docker","title":"Docker"},{"content":" clang-format 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 # 语言: None, Cpp, Java, JavaScript, ObjC, Proto, TableGen, TextProto Language: Cpp # BasedOnStyle BasedOnStyle: LLVM # 访问说明符(public、private等)的偏移 AccessModifierOffset: -4 # 开括号(开圆括号、开尖括号、开方括号)后的对齐: Align, DontAlign, AlwaysBreak(总是在开括号后换行) AlignAfterOpenBracket: Align # 连续赋值时，对齐所有等号 AlignConsecutiveAssignments: true # 连续声明时，对齐所有声明的变量名 AlignConsecutiveDeclarations: true # 左对齐逃脱换行(使用反斜杠换行)的反斜杠 AlignEscapedNewlinesLeft: true # 水平对齐二元和三元表达式的操作数 AlignOperands: true # 对齐连续的尾随的注释 AlignTrailingComments: true # 允许函数声明的所有参数在放在下一行 AllowAllParametersOfDeclarationOnNextLine: true # 允许短的块放在同一行 AllowShortBlocksOnASingleLine: false # 允许短的case标签放在同一行 AllowShortCaseLabelsOnASingleLine: false # 允许短的函数放在同一行: None, InlineOnly(定义在类中), Empty(空函数), Inline(定义在类中，空函数), All AllowShortFunctionsOnASingleLine: Empty # 允许短的if语句保持在同一行 AllowShortIfStatementsOnASingleLine: false # 允许短的循环保持在同一行 AllowShortLoopsOnASingleLine: false # 总是在定义返回类型后换行(deprecated) AlwaysBreakAfterDefinitionReturnType: None # 总是在返回类型后换行: None, All, TopLevel(顶级函数，不包括在类中的函数), # AllDefinitions(所有的定义，不包括声明), TopLevelDefinitions(所有的顶级函数的定义) AlwaysBreakAfterReturnType: None # 总是在多行string字面量前换行 AlwaysBreakBeforeMultilineStrings: false # 总是在template声明后换行 AlwaysBreakTemplateDeclarations: false # false表示函数实参要么都在同一行，要么都各自一行 BinPackArguments: true # false表示所有形参要么都在同一行，要么都各自一行 BinPackParameters: true # 大括号换行，只有当BreakBeforeBraces设置为Custom时才有效 BraceWrapping: # class定义后面 AfterClass: false # 控制语句后面 AfterControlStatement: false # enum定义后面 AfterEnum: false # 函数定义后面 AfterFunction: false # 命名空间定义后面 AfterNamespace: false # ObjC定义后面 AfterObjCDeclaration: false # struct定义后面 AfterStruct: false # union定义后面 AfterUnion: false # catch之前 BeforeCatch: true # else之前 BeforeElse: true # 缩进大括号 IndentBraces: false # 在二元运算符前换行: None(在操作符后换行), NonAssignment(在非赋值的操作符前换行), All(在操作符前换行) BreakBeforeBinaryOperators: NonAssignment # 在大括号前换行: Attach(始终将大括号附加到周围的上下文), Linux(除函数、命名空间和类定义，与Attach类似), # Mozilla(除枚举、函数、记录定义，与Attach类似), Stroustrup(除函数定义、catch、else，与Attach类似), # Allman(总是在大括号前换行), GNU(总是在大括号前换行，并对于控制语句的大括号增加额外的缩进), WebKit(在函数前换行), Custom 如果不换行岂不是一直出屏幕外了？ # 注：这里认为语句块也属于函数 BreakBeforeBraces: Custom # 在三元运算符前换行 BreakBeforeTernaryOperators: true # 在构造函数的初始化列表的逗号前换行 BreakConstructorInitializersBeforeComma: false # 每行字符的限制, 0表示没有限制 ColumnLimit: 80 # 描述具有特殊意义的注释的正则表达式, 它不应该被分割为多行或以其它方式改变 CommentPragmas: \u0026#39;^ IWYU pragma:\u0026#39; # 构造函数的初始化列表要么都在同一行, 要么都各自一行 ConstructorInitializerAllOnOneLineOrOnePerLine: true # 构造函数的初始化列表的缩进宽度 ConstructorInitializerIndentWidth: 4 # 延续的行的缩进宽度 ContinuationIndentWidth: 4 # 去除C++11的列表初始化的大括号{后和}前的空格 Cpp11BracedListStyle: false # 继承最常用的指针和引用的对齐方式 DerivePointerAlignment: false # 关闭格式化 DisableFormat: false # 自动检测函数的调用和定义是否被格式为每行一个参数(Experimental) ExperimentalAutoDetectBinPacking: false # 需要被解读为foreach循环而不是函数调用的宏 ForEachMacros: [ foreach, Q_FOREACH, BOOST_FOREACH ] # 对 #include进行排序, 匹配了某正则表达式的 #include拥有对应的优先级, 匹配不到的则默认优先级为INT_MAX(优先级越小排序越靠前), # 可以定义负数优先级从而保证某些 #include永远在最前面 IncludeCategories: - Regex: \u0026#39;^\u0026#34;(llvm|llvm-c|clang|clang-c)/\u0026#39; Priority: 2 - Regex: \u0026#39;^(\u0026lt;|\u0026#34;(gtest|isl|json)/)\u0026#39; Priority: 3 - Regex: \u0026#39;.*\u0026#39; Priority: 1 # 缩进case标签 IndentCaseLabels: false # 缩进宽度 IndentWidth: 4 # 函数返回类型换行时, 缩进函数声明或函数定义的函数名 IndentWrappedFunctionNames: false # 保留在块开始处的空行 KeepEmptyLinesAtTheStartOfBlocks: true # 开始一个块的宏的正则表达式 MacroBlockBegin: \u0026#39;\u0026#39; # 结束一个块的宏的正则表达式 MacroBlockEnd: \u0026#39;\u0026#39; # 连续空行的最大数量 MaxEmptyLinesToKeep: 2 # 命名空间的缩进: None, Inner(缩进嵌套的命名空间中的内容), All NamespaceIndentation: Inner # 使用ObjC块时缩进宽度 ObjCBlockIndentWidth: 4 # 在ObjC的@property后添加一个空格 ObjCSpaceAfterProperty: false # 在ObjC的protocol列表前添加一个空格 ObjCSpaceBeforeProtocolList: true # 在call(后对函数调用换行的penalty PenaltyBreakBeforeFirstCallParameter: 19 # 在一个注释中引入换行的penalty PenaltyBreakComment: 300 # 第一次在 \u0026lt;\u0026lt; 前换行的penalty PenaltyBreakFirstLessLess: 120 # 在一个字符串字面量中引入换行的penalty PenaltyBreakString: 1000 # 对于每个在行字符数限制之外的字符的penalty PenaltyExcessCharacter: 1000000 # 将函数的返回类型放到它自己的行的penalty PenaltyReturnTypeOnItsOwnLine: 60 # 指针和引用的对齐: Left, Right, Middle PointerAlignment: Left # 允许重新排版注释 ReflowComments: true # 允许排序 #include SortIncludes: true # 在C风格类型转换后添加空格 SpaceAfterCStyleCast: false # 在赋值运算符之前添加空格 SpaceBeforeAssignmentOperators: true # 开圆括号之前添加一个空格: Never, ControlStatements, Always SpaceBeforeParens: ControlStatements # 在空的圆括号中添加空格 SpaceInEmptyParentheses: false # 在尾随的评论前添加的空格数(只适用于//) SpacesBeforeTrailingComments: 2 # 在尖括号的 \u0026lt; 后和 \u0026gt; 前添加空格 SpacesInAngles: true # 在容器(ObjC和JavaScript的数组和字典等)字面量中添加空格 SpacesInContainerLiterals: true # 在C风格类型转换的括号中添加空格 SpacesInCStyleCastParentheses: true # 在圆括号的(后和)前添加空格 SpacesInParentheses: true # 在方括号的[后和]前添加空格, lamda表达式和未指明大小的数组的声明不受影响 SpacesInSquareBrackets: false # 标准: Cpp03, Cpp11, Auto Standard: Cpp11 # tab宽度 TabWidth: 4 # 使用tab字符: Never, ForIndentation, ForContinuationAndIndentation, Always UseTab: Never typedef syntax 1 typedef \u0026lt;existing_data_type\u0026gt; \u0026lt;new_data_type_name\u0026gt;; sample array 1 2 3 4 5 typedef int sixteen_int_array[16]; // type \\Rightarrow int(*)[16]; sixteen_int_array arr; // equal uint32_t (*arr)[16]; arr = calloc(16, sizeof(uint32_t)); struct 1 2 3 4 typedef struct sample_struct { int a; char b; } struct_t; function pointer return type: int, arguments: (int, char) 1 typedef int (*func_ptr_t)(int, char); memory calloc alocated with 0 1 2 3 void* calloc(size_t num, size_t size); int* arr; arr = (int*)calloc(16, sizeof(int)); // a[16] = {0} file FILE write 1 2 3 4 5 6 7 8 9 10 11 char* filename = \u0026#34;file.txt\u0026#34;; FILE* fp; // Open the file for writing in binary mode fp = fopen(filename, \u0026#34;wb\u0026#34;); if (fp == NULL) { fprintf(stderr, \u0026#34;Error opening file %s\\n\u0026#34;, filename); exit(1); } char buffer[128] = {}; sprintf(buffer, \u0026#34;write to file: %s\u0026#34;, filename); fwrite(buffer, sizeof(char), strlen(buffer), fp); cmake add compilation options 1 add_compile_options(-g) ","permalink":"https://st-saint.github.io/posts/language/cc/","summary":"cc","title":"C - Cpp"},{"content":" git cli git branch git rev-parse --abbrev-ref HEAD git tags git describe --abbrev=0 --tags HEAD git hash git rev-parse HEAD clone single branch 1 git clone \u0026lt;url\u0026gt; --branch \u0026lt;branch/tag\u0026gt; --single-branch [\u0026lt;folder\u0026gt;] submodule ","permalink":"https://st-saint.github.io/posts/language/git/","summary":"Git","title":"Git"},{"content":" String \u0026amp; Bytes bytes to string 1 return b\u0026#34;abc123\u0026#34;.decode(\u0026#34;utf-8\u0026#34;) abc123 string to bytes 1 return \u0026#34;abc123\u0026#34;.encode(\u0026#34;utf-8\u0026#34;) b\u0026#39;abc123\u0026#39; time 1 2 3 4 5 6 7 from time import gmtime, localtime, strftime def print_gmtime(): strftime(\u0026#34;%a, %d %b %Y %H:%M:%S +0000\u0026#34;, gmtime()) def print_localtime(): return strftime(\u0026#34;%a, %d %b %Y %H:%M:%S +0000\u0026#34;, localtime()) None socket server 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # Echo server program import socket from time import gmtime, strftime HOST = \u0026#39;192.168.97.2\u0026#39; # Symbolic name meaning all available interfaces PORT = 50007 # Arbitrary non-privileged port with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s: s.bind((HOST, PORT)) s.listen(1) conn, addr = s.accept() with conn: print(\u0026#39;Connected by\u0026#39;, addr) while True: data = conn.recv(1024) print(strftime(\u0026#34;%a, %d %b %Y %H:%M:%S +0000\u0026#34;, gmtime()) + \u0026#34;receive: \u0026#34; + str(data)) if not data: break conn.sendall(data) client 1 2 3 4 5 6 7 8 9 10 11 12 13 # Echo client program import socket import time HOST = \u0026#39;192.168.97.2\u0026#39; # The remote host PORT = 50007 # The same port as used by the server with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s: s.connect((HOST, PORT)) while True: s.sendall(b\u0026#39;Hello, world\u0026#39;) data = s.recv(1024) print(\u0026#39;Received\u0026#39;, repr(data)) time.sleep(1) class super 理论上 super() 可以直接 call 嗷, 返回父类\n调用父类函数时候, self指向的是子类 多继承的时候, 直接 super().func() 会从 mro 中, 从第二个找拥有 func() 的类\n如果使用 super(clazz, self).func() 则会从 clazz.mro 中的第二个类开始找 plot networkx → graphviz networkx to graphviz 1 2 3 4 5 6 7 8 9 import graphviz import networkx as nx G = nx.DiGraph() # G.add_node(u) # G.add_edge(u, v, label=label) A = nx.nx_agraph.to_agraph(G) A.layout(\u0026#34;dot\u0026#34;) A.draw(\u0026#39;graph.pdf\u0026#39;) dot example digraph { rankdir=LR; node [shape=ellipse]; edge [color=red]; A [label=\u0026#34;Start\u0026#34;]; B [label=\u0026#34;Read input\u0026#34;]; C [label=\u0026#34;Process input\u0026#34;]; D [label=\u0026#34;Write output\u0026#34;]; E [label=\u0026#34;Stop\u0026#34;]; A -\u0026gt; B; B -\u0026gt; C; C -\u0026gt; D [label=\u0026#34;Yes\u0026#34;]; D -\u0026gt; E; C -\u0026gt; E [label=\u0026#34;No\u0026#34;]; {rank=same; B C} } cli 1 dot -Tpng -Kdot -odot.png example.dot ","permalink":"https://st-saint.github.io/posts/language/python/","summary":"Python","title":"Python"},{"content":" defun defun define function\n1 2 3 4 (defun function-name (args) (interactive \u0026#34;...\u0026#34;) ... ) interactive code: reference interactive 通过 interactive 可以把一个函数变成一个可交互的命令 interactive 的命令才可以通过 M-x 执行, 类似把这个函数对用户 public file get parent directory 1 (file-name-directory buffer-file-name) buffer \u0026amp; window get 可以通过 (get-buffer BUFFER_NAME) / (get-buffer-window 直接拿到 buffer / window 可以不存在的话是 nil switch window 的话可以用 ace-window 的 aw-switch-to-window WINDOW_NAME ","permalink":"https://st-saint.github.io/posts/emacs/elisp/","summary":"Elisp","title":"Elisp"},{"content":" Rules 轮胎 每场比赛至少使用两种轮胎 每个赛事周提供 5 种 13 套轮胎 干胎 UltraSoft, SuperSoft, Soft, Medium, Hard 赛时根据比赛场地提供三种干轮, 作为该场的 Soft, Medium, Hard 雨胎 Intermediate, Wet Theory Tyres 工作温度 越硬工作温度越高 Tyre blankets 可以提供大概 70℃ 理论上每种胎每圈速度差分别在 0.5s 和 0.8s, 但是具体赛道有差别 Tyres Temperature(℃) Hard 110 - 140 Middle 100 - 130 Soft 90 - 120 磨损 跟车时在弯道下压力不足打滑会增大磨损 Undercut \u0026amp; Overcut ref: Chain Bear: Triggering undercuts and stretching the tyre life - How Strategy shaped the French Grand Prix 通过一些进站策略拿到位置, 避免正面对抗 适用情况: 在对手身后, 落后 1 ~ 3 s, 不好直接进攻\n注意出站后是否在 free air Undercut 早进站, 靠新轮胎优势追进 pit delta (约25+-s) 对手如果进站会落在身后 Overcut 如果对手换新胎升温慢/难达到工作温度, 前几圈速度较慢 靠旧胎速度优势将对手拉开 pit delta 再进站, 出站后在对手身前 Techniques Overtake \u0026amp; Defense TC introduction TC(Traction Control) 可以帮助控制引擎输出功率, 防止打滑 也限制了输出功率, 以及一些需要轻微打滑的时候没有办法让轮胎打滑 本质上是 RPM 的问题 drive without TC 非常非常困难, 关了 TC 每次急了油门给大一点都是 spin throttle 过弯 apex 之后, 油门不要超过 1/2, 方向打正前不能全油门, 在回正方向过程中可以缓慢增大油门 感受轮胎/赛道抓地力动态调整出弯油门的极限 Throttle Linearity 设置成 50 左右可以有效防止加油过快 save the car 感觉到失去抓地力即将打滑的时候, 轻松油门, 快速反打方向, 并回正(或继续反打) short-shifting 出弯时, 不用等到转速达到上限才升档, 8000-10000 转即可升档 提前换档可以提前踩更多油门 低档位和雨天效果明显 ERS 在获得足够抓地力/方向盘回正全油门之前开 ERS 容易 spin kerbs 在路肩上加油门 非常 容易 spin ! on-throttle differential 开高速度更快但更容易 spin 轻微降低可以显著避免 spin reference https://www.youtube.com/watch?v=1SJXAanpEJ4 https://www.youtube.com/watch?v=pUuxiD-iNFg\u0026amp;t=1s Strategy stream settings ","permalink":"https://st-saint.github.io/posts/f1/","summary":"F1 notebook","title":"F1"},{"content":" projectile 好像并不是所有常见项目都会被识别成 projectile , 所以根目录加一个空 .projectile 文件 ignore projectile ignore 依赖于 projectile-indexing-method projectile-indexing-method alien 直接使用外部index, projectile do nothing 效率最好 hybrid external tool + projectile filter 直接用 .projectile 声明 ignore 好像不总有效 .ignore 中写 exclude/include 会更好点(因为用的是 rg) native Emacs lisp indexing 很慢 issue balanced bracket 理论上 Emacs native 的 sexp 是可以直接匹配的, 但是好像 evil 下行为模式有些不一样 Key Function C-M-(f/b/n/p) supposed to be jumping to balanced bracket ","permalink":"https://st-saint.github.io/posts/emacs/doom/","summary":"Doom-Emacs","title":"Doom"},{"content":" arch packages manjora plasma 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 sudo pacman -S --noconfirm \\ base-devel \\ linux-headers \\ networkmanager \\ xorg \\ xorg-xinit \\ wezterm \\ bear \\ bc \\ cmake \\ boost \\ gdb \\ ctags \\ global \\ cpio \\ pahole \\ grub \\ ripgrep \\ libgccjit \\ libvirt \\ virt-manager \\ virt-install \\ bridge-utils \\ qemu-full \\ docker \\ ntfs-3g \\ llvm \\ clang \\ go \\ rust \\ ant \\ lib32-glibc \\ maven pip install epc \\ six \\ pyright \\ matplotlib \\ networkx personal pakcages 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 yay -S --noconfirm \\ nitrogen \\ google-chrome \\ nerd-fonts-git \\ adobe-source-han-sans-cn-fonts \\ adobe-source-han-serif-cn-fonts \\ ttf-symbola \\ ttf-dejavu \\ noto-fonts \\ noto-fonts-emoji \\ noto-fonts-cjk \\ ttf-dejavu-nerd \\ wqy-microhei \\ wqy-microhei-lite \\ wqy-bitmapfont \\ wqy-zenhei \\ discord \\ dunst \\ zoom \\ slack \\ flameshot \\ btop \\ isync \\ msmtp \\ neofetch \\ pipewire-pulse \\ pavumeter \\ pavucontrol \\ alsa-utils \\ paprefs \\ pasystray \\ hugo \\ fzf \\ exa \\ pandoc \\ wezterm \\ chafa \\ perl-image-exiftool \\ giflib \\ starship \\ rofi \\ words \\ stow \\ vlc \\ tree-sitter \\ ibus-rime \\ nemo \\ autojump \\ krita \\ netease-cloud-music \\ picom \\ mu-git \\ aspell \\ aspell-en \\ texlive-bin \\ radare2 \\ git-delta \\ screenkey \\ volnoti Internet Network connection VPN v2ray \u0026amp; v2rayA proxy proxychains anonymous Tor Web browsers Chrome Communication Email gmail mu4e remote desktop Remote desktop servers TigerVNC NoMachine Remote desktop clients TigerVNC Anydesk Multimedia Image Image viewer geeqie Image processing Krita font editor fontforge Screenshot flameshot snipaste audio system alsamixer editor Audacity video player VLC Utilities Terminal Command shells fish (bash incompatible) zsh\noh-my-zsh starship fzf-tab zsh-syntax-highlighting Terminal Emulator alacritty\nkitty Byobu Zellij wezterm vterm Files File Manager SpaceFM (severe problem: NO TRASH FOLDER) nemo Archive managers 7zip development Emacs doom emacs Text Input ibus ibus-rime System Task managers btop htop System log viewers journalctl Font Viewer NA Fonts awesome font SauceCodePro Nerd Font Mono Documents and texts Office freeoffice Readers and viewers pdfstudioviewer Security Password managers gpg Others Desktop environments Window Manager Xmonad Task Bar Xmobar System tray stalonetrayer trayer Wallpaper nitrogen Notification dunst Logout sddm ","permalink":"https://st-saint.github.io/posts/toolchain/","summary":"tools I am using","title":"ToolChain"},{"content":" class template template 是 compilation feature, cannot instantiate a template with dynamic class at runtime enum enum 默认是 String 用 enum.valueOf(str) convert to enum integer enum 1 2 3 4 5 6 7 8 9 10 public enum Type { SIGN_CREATE(0), SIGN_CREATE_BONUS(1), HOME_SCREEN(2), REGISTER_SCREEN(3); private final int value; Type(final int v){value = v;} public int getValue() { return value; } } 用 index 访问 Type.values()[index] Project classpath 访问 resources 也是需要在 classpath 中声明的 Serialize Gson Gson 应该是还比较好的方案了吧, 没有什么CVE问题 Process 阻塞 process 创建时默认重定向到 pipe, 如果主线程不及时读取 pipe 的内容, pipe buffer 会堵塞 format Conversion Argument Category Description \u0026#39;b\u0026#39;, \u0026#39;B\u0026#39; general If the argument arg is null, then the result is \u0026#34;false\u0026#34;. If arg is a boolean or Boolean, then the result is the string returned by String.valueOf(). Otherwise, the result is \u0026#34;true\u0026#34;. \u0026#39;h\u0026#39;, \u0026#39;H\u0026#39; general If the argument arg is null, then the result is \u0026#34;null\u0026#34;. Otherwise, the result is obtained by invoking Integer.toHexString(arg.hashCode()). \u0026#39;s\u0026#39;, \u0026#39;S\u0026#39; general If the argument arg is null, then the result is \u0026#34;null\u0026#34;. If arg implements Formattable, then arg.formatTo is invoked. Otherwise, the result is obtained by invoking arg.toString(). \u0026#39;c\u0026#39;, \u0026#39;C\u0026#39; character The result is a Unicode character \u0026#39;d\u0026#39; integral The result is formatted as a decimal integer \u0026#39;o\u0026#39; integral The result is formatted as an octal integer \u0026#39;x\u0026#39;, \u0026#39;X\u0026#39; integral The result is formatted as a hexadecimal integer \u0026#39;e\u0026#39;, \u0026#39;E\u0026#39; floating point The result is formatted as a decimal number in computerized scientific notation \u0026#39;f\u0026#39; floating point The result is formatted as a decimal number \u0026#39;g\u0026#39;, \u0026#39;G\u0026#39; floating point The result is formatted using computerized scientific notation or decimal format, depending on the precision and the value after rounding. \u0026#39;a\u0026#39;, \u0026#39;A\u0026#39; floating point The result is formatted as a hexadecimal floating-point number with a significand and an exponent \u0026#39;t\u0026#39;, \u0026#39;T\u0026#39; date/time Prefix for date and time conversion characters. See Date/Time Conversions. \u0026#39;%\u0026#39; percent The result is a literal \u0026#39;%\u0026#39; (\u0026#39;\\u0025\u0026#39;) \u0026#39;n\u0026#39; line separator The result is the platform-specific line separator date format 1 2 3 4 5 6 7 8 import java.text.DateFormat; import java.text.SimpleDateFormat; import org.apache.commons.lang3.time.DurationFormatUtils; DateFormat formatter = new SimpleDateFormat(\u0026#34;yyyy-MM-dd HH:mm:ss.SSS\u0026#34;); System.out.println(formatter.format(System.currentTimeMillis())); DurationFormatUtils.formatDuration(millis, \u0026#34;HH:mm:ss.SSS\u0026#34;) 2022-04-18 20:53:33.000538 iterator iterator and remove 1 2 3 4 5 6 for(Iterator\u0026lt;Map.Entry\u0026lt;String, String\u0026gt;\u0026gt; it = map.entrySet().iterator(); it.hasNext(); ) { Map.Entry\u0026lt;String, String\u0026gt; entry = it.next(); if(entry.getKey().equals(\u0026#34;\u0026#34;)) { it.remove(); } } File Path 一般直接用 Path 处理路径 Path.toFile() 直接转 File join 1 2 3 Path currentPath = Paths.get(System.getProperty(\u0026#34;user.dir\u0026#34;)); Path filePath = Paths.get(currentPath.toString(), \u0026#34;data\u0026#34;, \u0026#34;foo.txt\u0026#34;); System.out.println(filePath.toString()); list file 1 File[] files = new File(\u0026#34;/home\u0026#34;).listFiles(); copy\u0026amp;move move Option\nREPLACE_EXISTING ATOMIC_MOVE 1 Files.move(Paths.get(src), Paths.get(dest), null); copy 1 Files.copy(Paths.get(src), Paths.get(dest), null); Write to File BufferedWriter 写 String 1 2 3 4 String str = \u0026#34;Hello\u0026#34;; BufferedWriter writer = new BufferedWriter(new FileWriter(fileName)); writer.write(str); writer.close(); FileOutputStream 写 bytes 1 2 3 4 5 String str = \u0026#34;Hello\u0026#34;; FileOutputStream outputStream = new FileOutputStream(fileName); byte[] strToBytes = str.getBytes(); outputStream.write(strToBytes); outputStream.close(); Reflect from class 1 2 3 4 5 6 7 8 9 10 Field[] allFields = Person.class.getDeclaredFields(); assertEquals(2, allFields.length); assertTrue(Arrays.stream(allFields).anyMatch(field -\u0026gt; field.getName().equals(LAST_NAME_FIELD) \u0026amp;\u0026amp; field.getType().equals(String.class))); assertTrue(Arrays.stream(allFields).anyMatch(field -\u0026gt; field.getName().equals(FIRST_NAME_FIELD) \u0026amp;\u0026amp; field.getType().equals(String.class))); Object copy deep-copy problem A common solution to the deep copy problem is to use Java Object Serialization (JOS). Unfortunately, this approach has some problems, too:\nIt will only work when the object being copied, as well as all of the other objects references directly or indirectly by the object, are serializable. (In other words, they must implement java.io.Serializable.) Fortunately it is often sufficient to simply declare that a given class implements java.io.Serializable and let Java’s default serialization mechanisms do their thing. Java Object Serialization is slow, and using it to make a deep copy requires both serializing and deserializing. There are ways to speed it up (e.g., by pre-computing serial version ids and defining custom readObject() and writeObject() methods), but this will usually be the primary bottleneck. The byte array stream implementations included in the java.io package are designed to be general enough to perform reasonable well for data of different sizes and to be safe to use in a multi-threaded environment. These characteristics, however, slow down ByteArrayOutputStream and (to a lesser extent) ByteArrayInputStream. Disassembly class Parse class file 1 javap [-c] \u0026lt;class_name\u0026gt;.class options description -c Disassemble the code jar extract 1 jar xf \u0026lt;jar_file\u0026gt;.jar Debug jprofiler ","permalink":"https://st-saint.github.io/posts/language/java/","summary":"Java","title":"Java"},{"content":" recursion PERL, PERC 中 有类似 \\g\u0026lt;n\u0026gt; \\g{n} 的 backreference constructs 用来标识第 n 个 group 的正则式 java.util.regex 不支持 backreference constructs 也没有 Maven Repository 支持 backreference constructs\n浪费了我一天时间 ","permalink":"https://st-saint.github.io/posts/language/regex/","summary":"something in regex","title":"Regex"},{"content":" emacs-calculator 逆波兰表示法. 栈垂直向下生长. 类型 模数 mod 复数 (-1, 2) -\u0026gt; -1 + 2i 分数 numerator:denominator 会自动约分 基数 输入 radix#exp 向量 [4, 1, 5] [ [ 1, 2, 3 ] [ 4, 5, 6 ] [ 6, 7, 8 ] ] 代数表达式 以 \u0026#39; 开头输入 a^3 + a^2 b / c d - a / b \u0026#34;big language\u0026#34; 使用 evaluates-to 赋值 2 3 b a a 1: a + ---- - - c d b 图形 gnuplot HMS 表示时间角度 1: 7@ 55\u0026#39; 13\u0026#34; -\u0026gt; 7h 55m 13s 时间 1: \u0026lt;6:59:34pm Tue Jun 23, 2009\u0026gt; 输入的数字会作为天来看待 shortcut Key Function Q Sqrt p set precision BACKSPACE pop/delete D r change radix display U c unit conversion a x calc expand a s calc simplify a d derivative a i integral ","permalink":"https://st-saint.github.io/posts/emacs/calc/","summary":"Emacs Calculator!","title":"Calc"},{"content":" Tricky string convert string to int 1 string := strconv.Itoa(int) int to string 1 int, err := strconv.Atoi(\u0026#34;string\u0026#34;) Fundamental struct new 1 var object StuctcName = StructName{Prop: value} ","permalink":"https://st-saint.github.io/posts/language/golang/","summary":"Golang","title":"Golang"},{"content":" Keymap Keymap Function C-M-f forward-sexp (coresponding bracket) C-M-b backward-sexp (coresponding bracket) org-mode Keymap Function C-c - add - ahead of current line debug 1 (setq debug-on-error t) function function key functionality file-exists-p nil file exisit file-name-directory nil get the directory of a file buffer-file-name nil current buffer/file name backward-up-list C-M-u upper level element (method -\u0026gt; class) align 第一次知道 C-u M-x 调用的命令跟直接 M-x 调用的还是不一样的 C-u M-x align-regexp 使用的是更高级的 align-regexp\nregexp: match the place you are interested in aligning; to do it, one of its parenthesis groups will be extended with spaces, or shortened by deleting characters parenthesis group: choose which one spacing: if the group is shorter than this, spaces will be added to it; if it\u0026#39;s longer, characters will be deleted from it, starting at the end (unless it\u0026#39;s longer for the purposes of alignment, of course) repeat: well, this is obvious, I think justify: non-blank characters inside the group won\u0026#39;t be deleted, and necessary spaces will be added/deleted from the left. On your second case, try: regexp \\([0-9]+\\), group -1. column (instead of spacing): align to that fixed column (of course, it doesn\u0026#39;t work well with “repeat”). GPG keeping your secrets encrypted on your file system is an easy way of keeping your secrets secret\nGpg(GNU Privacy Guard) is natively supported in emacs called EasyPG 只用一个gpg key管理所有加密文件和链接 可以不用每次输密码获取 root 权限 authinfo auth-sources 变量指定 authinfo 文件 格式 machine \u0026lt;HOST\u0026gt; login \u0026lt;ACCOUNT\u0026gt; port \u0026lt;PORT\u0026gt; password \u0026lt;PASSWORD\u0026gt;\nexample machine localhost login root port sudo password rootpasswd123 shell access gpg2 -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | sed -n \u0026#39;s,^machine gmail.com .*password \\([^ ]*\\).*,\\1,p\u0026#39; Creating a key gpg --gen-key cache password debug M-x debug-on-entry 设置入口 直接运行函数 keymap Shortcut Function d step through c continue(step out) font describe char display current char info 1 C-u C-x = ","permalink":"https://st-saint.github.io/posts/emacs/native/","summary":"Native Emacs Manuals","title":"Native Emacs"},{"content":" calfw A calendar framework for Emacs org-gcal - Synchronization with google calenda 老项目不维护了, 新地址 org-gcal google cloud calendar could api 改版了真的好难用, 文档给的也过时了 还是勉勉强强按文档同步了, project 测试版就可以用 sync 直接 org-ical-sync 就可以fetch，但是怎么push呢 在 org-heading 上 call org-gcal-post-at-point 加个 properties, schedule 也会被写到 properties, 感觉差不多能用 有个小问题是，sync一次之后，老是出现 rx--translate-bounded-repetition: rx ‘**’ range error auto archive auto archive g 了，sync的 rx \u0026#39;**\u0026#39; range error 是auto archive来的 PR 还没 merge了 , 先disable掉吧 ","permalink":"https://st-saint.github.io/posts/emacs/calendar/","summary":"Emacs Calendar \u0026amp; Google Calendar","title":"Calendar"},{"content":" 一般都说 hashmap 复杂度O(1), 感觉应该不完全是 研究一下 Werid things 容易想到如果有无限大数组, 直接当作桶对 object 取 hash, 期望不会 collide 就行 显然没有无限大内存，怎么做 index Java implement 实现是 hash_array (length: n to the pow of 2) 处理 collision\nlinkedlist R-B tree Index index map 的话, length 是 2 的幂次, hash 值直接取后n位, 作为 array 的 index\n有人说是高位和低位异或的, 听起来更有道理, 之后看看源码 array 小还是比较容易碰撞的, 元素多了就扩容 Resize when 有个 loadFactor , 估计是说 array 的 density 高了 or 碰撞太多就 resize, 之后看看源码 how double length 之后 array 都得遍历一下吧,\nlist 直接重新算index插入 BR tree 转回两个 list, 再重新计算要不要转成RB tree upper bound 好像是 2^30, 还蛮大的, 不知道内存会占多少G TODO Source code review Summary 显然查询是乐观估计的O(1), 最差是O(log_n), 不过应该是达不到最差, resize得当的话应该一直接近O(1) 添加删除需要重构, 假设元素个数等于数组长度就扩容, 迭代元素的复杂度均摊是O(2n)\n不过RB tree建树是O(n*log_n)的, 碰撞率是 v 的话, 这一部分的复杂度差不多是O(nv*log_nv), 介于 v 太小所以也可以近似忽略吧 总的来说 hash + resize 算法好的话, 碰撞率太低了, 还是可以认为 hashmap 复杂度是近似O(1)的 ","permalink":"https://st-saint.github.io/posts/hashmap/","summary":"一般都说 hashmap 复杂度O(1), 感觉应该不完全是 研究一下 Werid things 容易想到如果有无限大数组, 直接当作桶对 object 取 hash, 期望不会 collide 就行 显然没有无限大内存，怎么做 index Java implement 实现是 hash_array (length: n to the pow of 2) 处理 collision\nlinkedlist R-B tree Index index map 的话, length 是 2 的幂次, hash 值直接取后n位, 作为 array 的 index\n有人说是高位和低位异或的, 听起来更有道理, 之后看看源码 array 小还是比较容易碰撞的, 元素多了就扩容 Resize when 有个 loadFactor , 估计是说 array 的 density 高了 or 碰撞太多就 resize, 之后看看源码 how double length 之后 array 都得遍历一下吧,","title":"Hashmap"},{"content":" WX的十宗罪 说实话啊， wx真nmd不是个人啊 战犯日志 \u0026lt;2023-01-20 Fri\u0026gt; windows wx一天闪退 10 次 \u0026lt;2022-02-08 Tue\u0026gt; 零钱提现银行卡10金币一个nt免费券 \u0026lt;2022-02-09 Wed\u0026gt; windows 登录一次, 回 linux 就 nml 太长时间未登录，切一次登录一次, 玩nm \u0026lt;2022-02-21 Mon\u0026gt; 语音12个小时就必断一次是吧，sbnt 能不能把你tmlgb的文件存好啊 一周前发的照片就打不开 一个月前发的文件就已过期 ntmlgdb腾讯云是不是不是你们家的啊，还是ntmd的wx不是腾讯产品? 文件存储做不到，出个会员绑定个腾讯云服务也做不到？ 纯jbnt pyq 朋友圈朋的是个jb啊，发个pyq永远不能编辑，发错就要删，发错就要删，删nmlgcb，不如直接把nm删了 ","permalink":"https://st-saint.github.io/posts/wechat/","summary":"说实话嗷，wx真不是个人啊","title":"Wechat"},{"content":" org 理论上原生支持org, 好像直接解释为markdown了 分割线\n需要5个 dash - Front matter 是个啥呢\n#+__property__: __value__ 这样设置一些属性 example 1 2 3 4 #+date: Fri, 28 Jan 2022 23:05:33 +0800 #+summary: hugo things #+tags[]: tagA tagB #+categories[] catA catB front matter 得有 date 才能识别到 archive 里面 TOC ORG 的 TOC 好像有点问题 不过是根据 theme 来的，所以应该还好 \u0026lt;2022-02-23 Wed\u0026gt; UPDATE toc 直接 {{ .TableofContents }} 就可以生成 使用不同主题 hugo 并不支持在一个site中使用多个theme Solution 在不同子路径下创建多个仓库生成不同站点，生成到同一个public目录下 css 与theme相关 一般直接在assets/ 想给 \u0026lt;h1\u0026gt; 前加个 \u0026lt;hr\u0026gt; 加不上.. font 不是很好看 准备换一下 header 也改一下 找不到好看字体摆烂了，直接 system ui 换上 sauce code pro + dejavu 了 DateFormat 折磨 又 debug 一晚上, hugo 不会 build 超过当前日期的时间, 且 Hugo 默认采用的是格林尼治标准时间, 所以默认 8h 内的文章不会显示\n强制 build 未来文章: hugo --buildFuture / buildFuture = true 用识别时区的格式 Sat, 12 Mar 2022 23:43:48 +0800 文章 date 字段需要是以下格式 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 const ( Layout = \u0026#34;01/02 03:04:05PM \u0026#39;06 -0700\u0026#34; // The reference time, in numerical order. ANSIC = \u0026#34;Mon Jan _2 15:04:05 2006\u0026#34; UnixDate = \u0026#34;Mon Jan _2 15:04:05 MST 2006\u0026#34; RubyDate = \u0026#34;Mon Jan 02 15:04:05 -0700 2006\u0026#34; RFC822 = \u0026#34;02 Jan 06 15:04 MST\u0026#34; RFC822Z = \u0026#34;02 Jan 06 15:04 -0700\u0026#34; // RFC822 with numeric zone RFC850 = \u0026#34;Monday, 02-Jan-06 15:04:05 MST\u0026#34; RFC1123 = \u0026#34;Mon, 02 Jan 2006 15:04:05 MST\u0026#34; RFC1123Z = \u0026#34;Mon, 02 Jan 2006 15:04:05 -0700\u0026#34; // RFC1123 with numeric zone RFC3339 = \u0026#34;2006-01-02T15:04:05Z07:00\u0026#34; RFC3339Nano = \u0026#34;2006-01-02T15:04:05.999999999Z07:00\u0026#34; Kitchen = \u0026#34;3:04PM\u0026#34; // Handy time stamps. Stamp = \u0026#34;Jan _2 15:04:05\u0026#34; StampMilli = \u0026#34;Jan _2 15:04:05.000\u0026#34; StampMicro = \u0026#34;Jan _2 15:04:05.000000\u0026#34; StampNano = \u0026#34;Jan _2 15:04:05.000000000\u0026#34; ) 在 config.yaml 中可以设置 DateFormat, format 格式为\nexample: DateFormat: \u0026#34;Jan 02, 2006 Mon 15:04\u0026#34; Format Symbol Description Value Monday A full textual representation of the day of the week Monday through Sunday Mon A textual representation of a day, three letters Mon through Sun 2006 A full numeric representation of a year, 4 digits 2017 or 1986 06 A two digit representation of a year 17 or 86 January A full textual representation of a month, such as January or March January through December Jan A short textual representation of a month, three letters January through December 01 Numeric representation of a month, with leading zeros 01 through 12 1 Numeric representation of a month, without leading zeros 1 through 12 02 Day of the month, 2 digits with leading zeros 01 through 31 15 24-hour format of an hour with leading zeros 00 through 24 3 12-hour format of an hour without leading zeros 1 through 12 03 12-hour format of an hour with leading zeros 01 through 12 PM Indicator if AM or PM AM or PM 4 Minutes without leading zeros 1 through 59 04 Minutes with leading zeros 01 through 59 5 Seconds, without leading zeros 1 through 59 05 Seconds, with leading zeros 01 through 59 MST Timezone Example: UTC, MST -0700 Difference to GMT as ±hhmm +0000 -07:00 Difference to GMT as ±hh:mm +00:00 -07 Difference to GMT as ±hh +00 Z0700 Difference to GMT as Z or ±hhmm Z or ±hhmm Z07:00 Difference to GMT as Z or ±hh:mm Z or ±hh:mm Z07 Difference to GMT as Z or ±hh Z or ±hh ","permalink":"https://st-saint.github.io/posts/hugo/","summary":"hugo things","title":"Hugo"}]