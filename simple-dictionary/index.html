<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Simple Dictionary</title>
        <link rel=" stylesheet" href="https://unpkg.com/element-ui@2.13.0/lib/theme-chalk/index.css">
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
        <script src="https://unpkg.com/element-ui@2.13.0/lib/index.js"></script>
        <script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
        <script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
        <script src="https://requirejs.org/docs/release/2.3.6/minified/require.js"></script>
        <script src="https://unpkg.com/vue/dist/vue.js"></script>
        <style>
         html,body {
             width: 100%;
             height: 100%;
             margin: 0;
             padding: 0;
         }
         .content {
             width: 850px;
             height: 800px;
             margin: 0 auto; /*水平居中*/
             position: relative;
             top: 50%; /*偏移*/
             margin-top: -400px;
         }
         .correct{
             color: green;
         }
         .incorrect{
             color: red;
         }
        </style>
    </head>
    <body>
        <div id="app" class="content">
            <el-container style="height: 750px; width: 800px; border: 1px solid #eee;">
                <el-aside width="200px" style="background-color: rgb(238, 241, 246)">
                    <el-menu
                        default-active="2"
                        class="el-menu-vertical-demo"
                        @open="handleOpen"
                        @close="handleClose">
                        <el-menu-item index="0">
                            <i class="el-icon-reading"></i>
                            <span slot="title">Reading</span>
                        </el-menu-item>
                        <el-menu-item index="1">
                            <i class="el-icon-notebook-2"></i>
                            <span slot="title">Spelling</span>
                        </el-menu-item>
                        <el-submenu index="2">
                            <template slot="title">
                                <i class="el-icon-location"></i>
                                <span>导航一</span>
                            </template>
                            <el-menu-item-group>
                                <template slot="title">分组一</template>
                                <el-menu-item index="1-1">选项1</el-menu-item>
                                <el-menu-item index="1-2">选项2</el-menu-item>
                            </el-menu-item-group>
                            <el-menu-item-group title="分组2">
                                <el-menu-item index="1-3">选项3</el-menu-item>
                            </el-menu-item-group>
                            <el-submenu index="1-4">
                                <template slot="title">选项4</template>
                                <el-menu-item index="1-4-1">选项1</el-menu-item>
                            </el-submenu>
                        </el-submenu>
                        <el-menu-item index="3" disabled>
                            <i class="el-icon-document"></i>
                            <span slot="title">导航三</span>
                        </el-menu-item>
                        <el-menu-item index="4">
                            <i class="el-icon-setting"></i>
                            <span slot="title">导航四</span>
                        </el-menu-item>
                    </el-menu>
                </el-aside>

                <el-container>
                    <!-- <el-input v-model="message" :style="{ color : correct?'green':'red' }" @keyup="correctSpelling"></el-input>
                         <el-input v-model="message" style="color:red" @keyup="correctSpelling"></el-input> -->
                    <el-card class="box-card" style="margin: 0 0;width: 600px;">
                        <div slot="header" class="clearfix" style="height: 30px">
                            <span style="float: left; padding: 8px 0">Dictionary</span>
                            <el-button style="float: right; padding: 10px 0" type="text">Defination</el-button>
                        </div>
                        <center>
                            <el-row :span="8" style="height: 80px">
                                <el-card v-model="word" type="primary" shadow="hover">
                                    {{ word }}
                                </el-card>
                            </el-row>
                            <el-row :gutter="20" style="height: 200px; padding: 10px 0">
                                <el-col :span="11" :offset="1">
                                    <el-button v-model="meaning1" style="width: 200px; height: 150px;">
                                        <div style="padding: 0px;">
                                            <li v-for="(k, m) in meaning1" class="text item" style="white-space:normal;height: 20%;padding: 5px;">
                                                {{m + k}}
                                            </li>
                                        </div>
                                    </el-button>
                                </el-col>
                                <el-col :span="11">
                                    <el-button @click="pickNext" style="width: 200px; height: 150px;">word2</el-button>
                                </el-col>
                            </el-row>
                            <el-row :gutter="20" style="height: 180px">
                                <el-col :span="11" :offset="1">
                                    <el-button @click="pickNext" style="width: 200px; height: 150px;">word3</el-button>
                                </el-col>
                                <el-col :span="11">
                                    <el-button @click="pickNext" style="width: 200px; height: 150px;">word4</el-button>
                                </el-col>
                            </el-row>
                        </center>
                        <el-rate :max="value" show-score style="height: 30px;padding-left: 140px"></el-rate>
                        <el-rate :max="value" show-score style="height: 50px;padding-left: 140px"></el-rate>
                        <center>
                            <el-button type="primary" @click="pickNext">Next</el-button>
                            <el-button type="primary" @click="updateColor">Submit</el-button>
                        </center>
                    </el-card>
                </el-container>
            </el-container>
        </div>
        <script type="text/javascript">
         var vm = new Vue({
             el: '#app',
             data: {
                 message: "test",
                 word: "",
                 meaning1: "",
                 info: "",
                 value: 10,
                 correct: false,
             },
             methods: {
                 pickNext: function(){
                     var rnd = this.getRndInteger(this.wordlist.length);
                     var idx = this.getRndInteger(4);
                     this.word = this.wordlist[rnd];
                     this.meaning1 = this.dictionary[this.word].meaning;
                 },
                 updateColor: function(){
                     for(var t in this.dictionary){
                         console.log(this.dictionary[t].word);
                         this.word = this.dictionary[t].word;
                         break;
                     }
                 },
                 getColor: function(){
                     return this.correct;
                 },
                 correctSpelling: function(){
                     if( this.message.length <= this.word.length && this.word.substring(0, this.message.length).trim() == this.message.trim() ){
                         this.correct = true;
                     }
                     else{
                         this.correct = false;
                     }
                     return this.correct;
                 },
                 getRndInteger: function(maxi){
                     return Math.round(Math.random() * maxi);
                 },
                 getDictionary: async function(){
                     const dictionaryURL = "./dictionary.json";
                     axios.get('./dictionary.json')
                          .then(response => {
                              this.dictionary = response.data;
                              this.wordlist = []
                              for(var w in this.dictionary){
                                  this.wordlist.push(w);
                              }
                              this.pickNext();
                          })
                 },
                 handleOpen(key, keyPath) {
                     console.log(key, keyPath);
                 },
                 handleClose(key, keyPath) {
                     console.log(key, keyPath);
                 }
             },
             mounted: function(){
                 this.getDictionary();
             }
         })
        </script>
    </body>
</html>
